(globalThis.webpackChunksen_booster=globalThis.webpackChunksen_booster||[]).push([["node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-83caa4","node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive"],{90571:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=90571,e.exports=t},98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>d,default:()=>c});var r,n,o,a=s(92950);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},l.apply(this,arguments)}function i(e,t){let{title:s,titleId:i,...d}=e;return a.createElement("svg",l({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},d),s?a.createElement("title",{id:i},s):null,r||(r=a.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0H72C85.2548 0 96 10.7452 96 24V72C96 85.2548 85.2548 96 72 96H24C10.7452 96 0 85.2548 0 72V24Z",fill:"url(#paint0_linear_2416_5852)"})),n||(n=a.createElement("g",{clipPath:"url(#clip0_2416_5852)"},a.createElement("path",{opacity:.5,d:"M-19.5378 67.8428L-7.90562 66.2988C-8.40631 62.7153 -7.79319 59.071 -6.14948 55.8604C-4.50577 52.6498 -1.91107 50.0285 1.28247 48.3522C4.47601 46.6759 8.11373 46.0257 11.7019 46.4901C15.2901 46.9544 18.655 48.5106 21.3398 50.9476C24.0247 53.3846 25.8996 56.5843 26.71 60.1125C27.5204 63.6406 27.227 67.3264 25.8698 70.6694C24.5125 74.0125 22.1571 76.851 19.1232 78.7997C16.0892 80.7485 12.5237 81.713 8.91058 81.5625L8.49325 93.2966C14.5145 93.547 20.4562 91.9394 25.5121 88.692C30.5681 85.4445 34.4935 80.7143 36.7557 75.1433C39.0179 69.5724 39.5074 63.4303 38.1577 57.5505C36.8081 51.6708 33.6846 46.3381 29.2112 42.2759C24.7378 38.2138 19.131 35.619 13.1516 34.8435C7.17219 34.0681 1.10971 35.1496 -4.21323 37.9412C-9.53617 40.7329 -13.8618 45.0996 -16.6033 50.4487C-19.3448 55.7979 -20.3693 61.8706 -19.5378 67.8428Z",fill:"white"}),a.createElement("path",{opacity:.5,d:"M114.532 67.8418L102.9 66.2979C103.401 62.7144 102.788 59.07 101.144 55.8594C99.5002 52.6489 96.9055 50.0275 93.7119 48.3512C90.5184 46.6749 86.8807 46.0248 83.2925 46.4891C79.7043 46.9534 76.3394 48.5097 73.6545 50.9467C70.9697 53.3837 69.0948 56.5834 68.2844 60.1115C67.474 63.6396 67.7674 67.3254 69.1246 70.6685C70.4819 74.0115 72.8373 76.85 75.8712 78.7988C78.9052 80.7475 82.4706 81.712 86.0838 81.5615L86.5011 93.2956C80.4799 93.5461 74.5382 91.9385 69.4822 88.691C64.4263 85.4435 60.5009 80.7133 58.2387 75.1424C55.9765 69.5714 55.487 63.4293 56.8366 57.5496C58.1863 51.6698 61.3098 46.3371 65.7832 42.275C70.2566 38.2128 75.8634 35.618 81.8428 34.8426C87.8222 34.0671 93.8847 35.1486 99.2076 37.9402C104.531 40.7319 108.856 45.0986 111.598 50.4478C114.339 55.7969 115.364 61.8696 114.532 67.8418Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.0578 35.4505C37.9746 35.459 38.8579 35.0833 39.5174 34.4043L41.4334 32.3617C42.1385 31.61 42.9479 31.0187 43.8169 30.5877L43.8169 81.9296H51.2535L51.2535 30.5877C52.1226 31.0187 52.9319 31.61 53.637 32.3617L55.5531 34.4043C56.2125 35.0833 57.0958 35.459 58.0126 35.4505C58.9294 35.442 59.8064 35.05 60.4547 34.3589C61.103 33.6677 61.4708 32.7328 61.4787 31.7554C61.4867 30.7781 61.1343 29.8365 60.4973 29.1334L50.0074 17.9505C49.3516 17.2517 48.4624 16.8591 47.5352 16.8591C46.608 16.8591 45.7188 17.2517 45.0631 17.9505L34.5731 29.1334C33.9362 29.8365 33.5837 30.7781 33.5917 31.7554C33.5997 32.7328 33.9674 33.6677 34.6157 34.3589C35.264 35.05 36.141 35.442 37.0578 35.4505Z",fill:"white"}))),o||(o=a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear_2416_5852",x1:0,y1:0,x2:96,y2:96,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#0FB6B8"}),a.createElement("stop",{offset:1,stopColor:"#2FC0C2"})),a.createElement("clipPath",{id:"clip0_2416_5852"},a.createElement("rect",{width:66,height:66,fill:"white",transform:"translate(15 15)"})))))}const d=a.forwardRef(i),c=s.p+"static/media/logo.4a0c78d8a95b14284849f308aead3f6f.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return o.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return a.default}});var r=l(s(57919)),n=l(s(96917)),o=l(s(98463)),a=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const i=[r.default,n.default];t.h0=i},69599:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>$s,__esModule:()=>Ys.X$,logo:()=>Ys.jY,panels:()=>Ys.h0,readme:()=>Ys.ng});var r=s(55754),n=s(38385),o=s(92950),a=s(45055),l=s(94751),i=s(58421),d=s(66073),c=s(45263);const u=e=>{let{boosterAddress:t}=e;const{bidMint:s,askMint:n}=(0,r.useSelector)((e=>e.boosters[t]));return(0,c.jsxs)(l.Typography.Title,{level:4,children:[(0,c.jsx)(d.MintSymbol,{mintAddress:n.toBase58()})," -"," ",(0,c.jsx)(d.MintSymbol,{mintAddress:s.toBase58()})]})};var h=s(43785);const x=e=>{let{boosterAddress:t,size:s}=e;const{bidMint:n,askMint:o}=(0,r.useSelector)((e=>e.boosters[t]));return(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(d.MintAvatar,{mintAddress:o.toBase58(),size:s}),(0,c.jsx)(h.default,{name:"arrow-forward-outline"}),(0,c.jsx)(d.MintAvatar,{mintAddress:n.toBase58(),size:s})]})};var p=s(4065),j=s(95414);const y=e=>{const[t,s]=(0,o.useState)(void 0),{getDecimals:r}=(0,n.useMint)(),a=(0,o.useCallback)((async()=>{try{const t=await r(e);return s(t)}catch(t){return s(void 0)}}),[e,r]);return(0,o.useEffect)((()=>{a()}),[a]),t};const m=new(s(54882).C)("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDU4M0Q5MmIwMGJlNjZDNjg2NDUyY0JkNTZEMTlmOWZlMTRhNjhCYTQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTg4MDM1NjE3MTcsIm5hbWUiOiJCb29zdGVyRGV2In0.kaP_EXFB2q7Zo8_CWZfGI1n5R-AoZzfVTWpDdZ_REcM",["booster","order"]);var g=s(95418);const b={appId:"sen_booster",url:"https://descartesnetwork.github.io/sen-booster/index.js"},f={development:{...b},production:{...b}};var A=s(38073),C=s(33804);const w=e=>{if(!e)return!1;try{if(!new C.web3.PublicKey(e))throw new Error("Invalid public key");return!0}catch(t){return!1}},{metadata:{Metadata:T,MetadataData:v}}=A.programs,k=new C.web3.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");const S=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"devnet";this._connection=void 0,this.findDataByOwnerGroupByCollection=async e=>{if(!w(e))throw new Error("Invalid address!");const t=await T.findDataByOwner(this._connection,e);let s={};return t.forEach((e=>{e.collection&&(s[e.collection.key]=s[e.collection.key]?[...s[e.collection.key],e]:[e])})),s},this.findDataByOwner=async e=>{if(!w(e))throw new Error("Invalid address!");return await T.findDataByOwner(this._connection,e)},this.getNftMetadata=async e=>{if(!w(e))throw new Error("Invalid address!");return await T.findByMint(this._connection,e)},this.getListAccountNFTsBelongToCollection=async e=>await this._connection.getProgramAccounts(k,{commitment:"confirmed",filters:[{dataSize:679},{memcmp:{offset:368,bytes:e}}]}),this.isNftBelongsToCollection=async(e,t)=>{var s;return(null===(s=(await T.findByMint(this._connection,e)).data.collection)||void 0===s?void 0:s.key)===t},this._connection=new A.Connection(e)}},B={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",metaplexNFT:new S(n.rpc),senExchangeProgram:"6qT2KZYTBSZ7QXTFhzNJwPkrTWvsJGezQRg48PDryMfu"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",metaplexNFT:new S(n.rpc),senExchangeProgram:"3GXMn8DXgNeUVtBrFfrWEDHRQ6JEgKtptWf6Bqzmo4w4"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",metaplexNFT:new S(n.rpc),senExchangeProgram:"3GXMn8DXgNeUVtBrFfrWEDHRQ6JEgKtptWf6Bqzmo4w4"}},R={manifest:f[n.env],sol:B[n.net]},{sol:{metaplexNFT:N}}=R,I=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(n.util.explorer(t),"_blank")}),M=e=>window.notify({type:"error",description:e.message}),E=e=>{const{metadata:t}=(0,r.useSelector)((t=>t.boosters[e])),[s,n]=(0,o.useState)({budget:0,payRate:{}}),[a,l]=(0,o.useState)(!0),i=(0,o.useCallback)((async()=>{try{l(!0);const e=await m.methods.booster.get(t);return n(e)}catch(e){return M(e)}finally{l(!1)}}),[t]);return(0,o.useEffect)((()=>{i()}),[i]),{metaBooster:s,loading:a}};var z=s(48744),P=s.n(z);const O=e=>{let{boosterAddress:t}=e;const s=(0,r.useSelector)((e=>e.boosters[t].bidMint)),a=(0,r.useSelector)((e=>e.orders)),{metaBooster:{budget:i},loading:u}=E(t),h=y(s.toBase58())||0,x=(0,o.useMemo)((()=>{let e=new z.BN(0);for(const s in a){const{retailer:r,bidAmount:n,state:o}=a[s];r.toBase58()===t&&(o.approved||o.done)&&(e=e.add(n))}return p.utilsBN.undecimalize(e,h)}),[h,t,a]),m=(0,o.useMemo)((()=>Number(i)?Number(x)/Number(i):0),[i,x]);return(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{justify:"space-between",children:[(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Spin,{spinning:u,size:"small",children:(0,c.jsxs)(l.Space,{direction:"vertical",size:0,children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Process"}),(0,c.jsxs)(l.Typography.Text,{children:[(0,j.numeric)(x).format("0.0,[0000]")," ",(0,c.jsx)(d.MintSymbol,{mintAddress:s.toBase58()}),(0,c.jsx)(l.Typography.Text,{type:"secondary",children:`(${n.util.numeric(m).format("0,0.[00]%")})`})]})]})})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Spin,{spinning:u,size:"small",children:(0,c.jsxs)(l.Space,{direction:"vertical",align:"end",size:0,children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Budget"}),(0,c.jsxs)(l.Typography.Text,{children:[(0,j.numeric)(i).format("0.0,[0000]")," ",(0,c.jsx)(d.MintSymbol,{mintAddress:s.toBase58()})]})]})})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Progress,{className:"flex-progress",strokeColor:"#0FB5B8",percent:100*m,showInfo:!1,status:"active"})})]})},F=e=>{let{label:t,mintAddress:s="",align:r}=e;return(0,c.jsxs)(l.Space,{size:12,direction:"vertical",align:r,children:[(0,c.jsx)(l.Typography.Text,{children:t}),(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(d.MintAvatar,{mintAddress:s}),(0,c.jsx)(l.Typography.Title,{level:5,children:(0,c.jsx)(d.MintSymbol,{mintAddress:s})})]})]})},D=e=>{let{label:t,value:s,mintAddress:r="",size:n=8,align:o="start"}=e;return r?(0,c.jsx)(F,{align:o,label:t,mintAddress:r}):(0,c.jsxs)(l.Space,{align:o,size:n,direction:"vertical",children:[(0,c.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:t}),s]})},L=()=>{const e=(0,r.useSelector)((e=>e.orders)),t=(0,n.useWalletAddress)();return{ownOrders:(0,o.useMemo)((()=>Object.keys(e).map((t=>({...e[t],orderAddress:t}))).filter((e=>{let{authority:s}=e;return s.toBase58()===t}))),[e,t]).sort(((e,t)=>Number(t.createAt)-Number(e.createAt)))}};var V=s(40349),q=s.n(V);const Q=(0,o.memo)((e=>{let{endTime:t}=e;const s=Math.floor(Date.now()/1e3),r=q().duration(t-s,"seconds"),[n,a]=(0,o.useState)({days:r.days(),hours:r.hours(),minutes:r.minutes()}),i=(0,o.useCallback)((async()=>{if(!t)return;const e=Math.floor(Date.now()/1e3),s=q().duration(t-e,"seconds"),r=s.days(),n=s.hours(),o=s.minutes();a({days:r,hours:n,minutes:o})}),[t]);return(0,o.useEffect)((()=>{const e=setInterval((()=>i()),6e4);return()=>clearInterval(e)}),[i]),t?(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsxs)(l.Typography.Text,{className:"countdown",children:[n.days,"d"]}),":",(0,c.jsxs)(l.Typography.Text,{className:"countdown",children:[n.hours,"h"]}),":",(0,c.jsxs)(l.Typography.Text,{className:"countdown",children:[n.minutes,"m"]})]}):(0,c.jsx)(l.Typography.Text,{children:"Unlimited"})})),H=e=>{let{boosterAddress:t}=e;const{endAt:s,askTotal:a,askMint:i,bidMint:u}=(0,r.useSelector)((e=>e.boosters[t])),h=y(i.toBase58())||0,x=y(u.toBase58())||0,{metaBooster:{payRate:j},loading:m}=E(t),{ownOrders:g}=L(),b=(0,o.useMemo)((()=>{let e=new(P())(0);const s=g.filter((e=>{let{retailer:s}=e;return s.toBase58()===t}));for(const{state:t,bidAmount:r}of s)(t.approved||t.done)&&(e=e.add(r));return p.utilsBN.undecimalize(e,x)}),[x,t,g]),f=(0,o.useMemo)((()=>Object.keys(j).length?Math.max(...Object.values(j)):0),[j]);return(0,c.jsxs)(l.Row,{gutter:[48,16],children:[(0,c.jsx)(l.Col,{xs:12,md:5,lg:4,children:(0,c.jsx)(l.Spin,{spinning:m,size:"small",children:(0,c.jsxs)(l.Space,{direction:"vertical",className:"buy-back_tag",size:4,children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Buy-back"}),(0,c.jsxs)(l.Typography.Title,{style:{color:"#0FB5B8"},level:4,children:[f,"%"]})]})})}),(0,c.jsx)(l.Col,{xs:12,md:6,lg:4,children:(0,c.jsx)(l.Spin,{spinning:m,size:"small",children:(0,c.jsx)(D,{label:"Your bought",value:(0,c.jsxs)(l.Typography.Text,{children:[n.util.numeric(b).format("0,0.[0000]")," ",(0,c.jsx)(d.MintSymbol,{mintAddress:u})]}),size:4})})}),(0,c.jsx)(l.Col,{xs:12,md:6,lg:4,children:(0,c.jsx)(l.Spin,{spinning:m,size:"small",children:(0,c.jsx)(D,{label:"Total value sold",value:(0,c.jsxs)(l.Typography.Text,{children:[n.util.numeric(p.utilsBN.undecimalize(a,h)).format("0,0.[0000]")," ","LP"]}),size:4})})}),(0,c.jsx)(l.Col,{xs:12,md:7,lg:6,children:(0,c.jsx)(l.Spin,{spinning:m,size:"small",children:(0,c.jsx)(D,{label:"End date",value:(0,c.jsx)(Q,{endTime:s.toNumber()}),size:4})})})]})},U=e=>{let{value:t,onValue:s,prefix:r,suffix:n,max:o,disabled:a=!1}=e;return(0,c.jsx)(l.Card,{className:"input-number-card",style:{borderRadius:8},bodyStyle:{padding:0},children:(0,c.jsxs)(l.Row,{wrap:!1,align:"middle",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.InputNumber,{placeholder:"0",prefix:r,value:t,onChange:s,max:o,style:{width:"100%"},bordered:!1,disabled:a})}),n]})})},_=e=>{let{estimatedReceive:t,boosterAddress:s,discount:o,nftDiscount:a}=e;const{bidMint:i}=(0,r.useSelector)((e=>e.boosters[s])),u=y(i.toBase58())||0;return(0,c.jsx)(l.Card,{style:{borderRadius:8},bodyStyle:{padding:"12px 16px"},bordered:!1,children:(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{style:{color:"#0FB5B8"},children:"Buy-back"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:[(0,c.jsxs)(l.Typography.Title,{style:{color:"#0FB5B8"},level:3,children:[o,"%"]}),!!a&&(0,c.jsxs)(l.Typography.Title,{style:{color:"#0FB5B8"},level:3,children:["+ ",a,"%"]})]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{children:"Market buy-back"})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Typography.Text,{delete:!0,children:"100%"})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{children:"Estimated received"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Title,{level:5,children:[n.util.numeric(p.utilsBN.undecimalize(t,u)).format("0,0.[0000]")," ",(0,c.jsx)(d.MintSymbol,{mintAddress:i})]})})]})})]})})},{sol:{metaplexNFT:W}}=R,K=e=>{const[t,s]=(0,o.useState)(),[r,a]=(0,o.useState)(),[l,i]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1),u=(0,o.useCallback)((async()=>{if(!g.account.isAddress(e))return s(void 0),a(void 0);i(!0);try{const t=await n.DataLoader.load("getNftMetadata"+e,(()=>W.getNftMetadata(e)));s(t);const r=t.data.data.uri,o=await n.DataLoader.load("getNftMetadataUrl"+e,(()=>fetch(r).then((e=>e.json()))));a(o)}catch(t){c(!0)}finally{i(!1)}}),[e]);return(0,o.useEffect)((()=>{u()}),[u]),{metadata:t,nftInfo:r,loading:l,isUnknownNFT:d}},Z=e=>{let{nftAddress:t,onSelect:s,isSelected:r}=e;const{ui:{width:a}}=(0,n.useUI)(),i=(0,o.useMemo)((()=>a<768?150:198),[a]),{nftInfo:d,loading:u}=K(t);return(0,c.jsx)(l.Card,{bordered:!1,style:{cursor:"pointer",textAlign:"center",background:"transparent"},bodyStyle:{padding:0},loading:u,onClick:()=>s(t,`${null===d||void 0===d?void 0:d.image}`),children:(0,c.jsxs)(l.Row,{gutter:[8,8],justify:"center",children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Image,{src:(null===d||void 0===d?void 0:d.image)||"",preview:!1,style:{borderRadius:12},width:i,height:i})}),(0,c.jsx)(l.Col,{style:{width:i},children:(0,c.jsxs)(l.Row,{justify:"space-between",gutter:[8,8],children:[(0,c.jsx)(l.Col,{flex:"auto",style:{textAlign:"start"},children:(0,c.jsx)(l.Typography.Text,{children:null===d||void 0===d?void 0:d.name})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Typography.Text,{children:n.util.shortenAddress(t)})})]})})]})})},G=e=>{const t=(0,r.useSelector)((e=>e.voucherPrinters)),[s,n]=(0,o.useState)([]);return(0,o.useEffect)((()=>{const s=[];for(const r in t)t[r].retailer.toBase58()===e&&s.push({...t[r]});return n(s)}),[e,t]),s},{sol:{metaplexNFT:J}}=R,Y=e=>{const[t,s]=(0,o.useState)(),[r,a]=(0,o.useState)(),{accounts:l}=(0,n.useAccount)(),i=(0,o.useCallback)((async()=>{if(!e)return s(void 0);const t=await n.DataLoader.load("findDataByOwner"+e,(()=>J.findDataByOwner(e)));s(t)}),[e]);(0,o.useEffect)((()=>{i()}),[i]);const d=(0,o.useCallback)((async()=>{if(!t)return a(void 0);const{splt:s}=window.sentre;let r=[];return await Promise.all(t.map((async t=>{const n=await s.deriveAssociatedAddress(e,t.mint);let o=l[n];new z.BN(null===o||void 0===o?void 0:o.amount.toString()).eq(new z.BN(1))&&r.push(t)}))),a(r)}),[l,t,e]);return(0,o.useEffect)((()=>{d()}),[d]),{nfts:r}},X=e=>{let{onSelectNFT:t,boosterAddress:s,selectedNFTs:r,removeNFT:a}=e;const[i,d]=(0,o.useState)(Array(3).fill({nftAddress:"",img:""})),[u,x]=(0,o.useState)(!1),[p,j]=(0,o.useState)(0),[y,m]=(0,o.useState)([]),b=(e=>{const[t,s]=(0,o.useState)([]),r=(0,n.useWalletAddress)(),{nfts:a}=Y(r),l=G(e),i=(0,o.useCallback)((()=>{if(!l.length||!a)return[];const e=l.map((e=>e.collection.toBase58())),t=a.filter((t=>{let{collection:s}=t;return e.includes((null===s||void 0===s?void 0:s.key)||"")}));return s(t)}),[a,l]);return(0,o.useEffect)((()=>{i()}),[i]),t})(s),f=G(s),A=(0,o.useMemo)((()=>b.filter((e=>!r.includes(e.mint)))),[b,r]),C=(0,o.useCallback)((async()=>{const e=await Promise.all(f.map((async e=>{const t=await(async e=>{if(g.account.isAddress(e))try{return await n.DataLoader.load("getNftMetadata"+e,(()=>N.getNftMetadata(e)))}catch(t){return}})(e.collection.toBase58());return(null===t||void 0===t?void 0:t.data.data.name)||"Unknown NFT"})));return m(e)}),[f]),w=(e,s)=>{t(e);const r=[...i];r[p]={nftAddress:e,img:s},d(r),x(!1)};return(0,o.useEffect)((()=>{C()}),[C]),(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{align:"center",size:8,children:[(0,c.jsx)(l.Typography.Text,{children:"Use NFTs to increase Buy-back rate"}),(0,c.jsx)(l.Tooltip,{placement:"right",title:(0,c.jsx)(l.Typography.Text,{style:{color:"#E9E9EB"},children:"Only retailer-approved NFTs can be used for this booster. There are 3 slots in all to use NFTs, with each slot used will increase the payout rate by 2.5%."}),children:(0,c.jsx)(h.default,{name:"information-circle-outline"})})]})}),(0,c.jsx)(l.Col,{onClick:e=>e,span:24,children:(0,c.jsx)(l.Space,{children:i.map(((e,t)=>{let{img:s}=e;return(0,c.jsx)(l.Tooltip,{placement:"topLeft",title:"NFTs in the collections below will be approved for this booster",children:(0,c.jsxs)(l.Card,{className:"upload-box card-nft-image-only",onClick:()=>{j(t),x(!0)},children:[s?(0,c.jsx)(l.Image,{src:s,alt:"avatar",width:64,height:64,style:{borderRadius:8,marginTop:-1},preview:!1,className:"nft-image"}):(0,c.jsx)(h.default,{name:"add-outline"}),s&&(0,c.jsx)(l.Button,{type:"text",className:"icon-delete-nft",onClick:e=>((e,t)=>{e.stopPropagation();const s=[...i],r=s.findIndex((e=>t===e.img));return a(s[r].nftAddress),-1!==r&&(s[r]={nftAddress:"",img:""}),d(s)})(e,s),icon:(0,c.jsx)(h.default,{name:"trash-outline"})})]})})}))})}),(0,c.jsx)(l.Modal,{title:(0,c.jsx)(l.Typography.Title,{level:4,children:"Select a NFT"}),visible:u,closeIcon:(0,c.jsx)(h.default,{name:"close-outline"}),onCancel:()=>x(!1),footer:null,className:"card-manage",style:{paddingBottom:0},children:(0,c.jsx)(l.Row,{gutter:[24,24],className:"scrollbar",style:{maxHeight:400},children:A.length?A.map((e=>(0,c.jsx)(l.Col,{xs:12,md:12,children:(0,c.jsx)(Z,{nftAddress:e.mint,onSelect:w})},e.mint))):(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography,{children:"You don't have a NFT"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography,{children:"You can buy NFTs from the collections below:"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.List,{itemLayout:"horizontal",dataSource:y,renderItem:e=>(0,c.jsx)(l.List.Item,{children:(0,c.jsxs)(l.Space,{size:12,children:[(0,c.jsx)(l.Typography.Text,{style:{color:"#0fb5b8 "},children:"\u2022"}),(0,c.jsx)(l.Typography.Text,{style:{color:"#0fb5b8 "},children:e})]})})})})]})})})})]})},$=(e,t,s)=>g.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(g.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},ee=e=>{const{wallet:{lamports:t}}=(0,n.useWallet)(),s=(0,n.useWalletAddress)(),{accounts:r}=(0,n.useAccount)(),{amount:o,mint:a}=r[e]||{},l=y(a)||0;return g.account.isAddress(s)&&g.account.isAddress(e)?e===s?$(g.DEFAULT_EMPTY_ADDRESS,t,9):$(a,o,l):$()},te=e=>{const[t,s]=(0,o.useState)(""),{wallet:{address:r}}=(0,n.useWallet)(),a=ee(t);return(0,o.useEffect)((()=>{(async()=>{if(!g.account.isAddress(r)||!g.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const n=await t.deriveAssociatedAddress(r,e);s(n)}catch(n){return s("")}})()})),a};var se=s(67763),re=s.n(se);const ne=()=>{const e=(0,n.useWalletAddress)();return(0,o.useMemo)((()=>{const t=(0,p.getAnchorProvider)(n.rpc,e,window.sentre.wallet);return{provider:t,senExchange:new(re())(t,R.sol.senExchangeProgram)}}),[e])},oe=(e,t)=>{const{tokenProvider:s,getMint:r,getDecimals:a}=(0,n.useMint)(),{pools:l}=(0,n.usePool)(),[i,d]=(0,o.useState)(0),c=(0,o.useCallback)((async e=>{var r;const o=await s.findByAddress(e),a=null===o||void 0===o||null===(r=o.extensions)||void 0===r?void 0:r.coingeckoId;if(!a){if(t)throw new Error("Unknown Token");return 0}const l=(await n.util.fetchCGK(a)).price;if(!l){if(t)throw new Error("Not find on Cgk");return 0}return l}),[t,s]),u=(0,o.useCallback)((async(e,t)=>{const s=await c(e),r=await a(e);return Number(g.utils.undecimalize(t,r))*s}),[a,c]),h=(0,o.useCallback)((async e=>{const t=Object.values(l).find((t=>t.mint_lpt===e));if(!t)return 0;const{reserve_a:s,reserve_b:n,mint_a:o,mint_b:a}=t;if(s*n===BigInt(0))return 0;const{[e]:{supply:i}}=await r({address:e});return(await u(o,s)+await u(a,n))/Number(g.utils.undecimalize(i,9))}),[r,u,l]),x=(0,o.useCallback)((async e=>{try{var t;const r=await s.findByAddress(e);if(!r){const t=await h(e);return d(t)}const o=null===(t=r.extensions)||void 0===t?void 0:t.coingeckoId;if(!o)return d(0);const a=await n.util.fetchCGK(o);return d(a.price)}catch(r){return 0}}),[h,s]);return(0,o.useEffect)((()=>{x(e)}),[x,e]),i},ae=10**9,le="MMM DD, YYYY HH:mm",ie="all",de=86400;let ce,ue,he;!function(e){e.Booster="booster",e.Redeem="redeem",e.BoostList="boost-list",e.OrderList="order-list"}(ce||(ce={})),function(e){e.User="user",e.Retailer="retailer"}(ue||(ue={})),function(e){e.LPHighToLow="LP sold: High to low",e.LPLowToHigh="LP sold: Low to high",e.RateHighToLow="Buy-back rate: High to low",e.RateLowToHigh="Buy-back rate: Low to high"}(he||(he={}));const xe=Object.entries(he).map((e=>{let[t,s]=e;return s}));let pe;!function(e){e.AvailableBooster="Available booster",e.BoostOnly="Boost only",e.ExpiredBooster="Expired booster"}(pe||(pe={}));const je={"No lock time":0,"30 days":30,"60 days":60,"90 days":90,"120 days":120,"365 days":365},ye=[{key:"Past 30 days",value:30},{key:"Past 60 days",value:60},{key:"Past 90 days",value:90},{key:"Past 120 days",value:120},{key:"Past 365 days",value:365}],me={retailer:[{key:"All",value:ie},{key:"Approved",value:"approved"},{key:"Open",value:"open"},{key:"Done",value:"done"},{key:"Rejected",value:"rejected"}],user:[{key:"All",value:ie},{key:"Ready",value:"ready"},{key:"Approved",value:"approved"},{key:"Waiting",value:"open"},{key:"Done",value:"done"},{key:"Canceled",value:"canceled"},{key:"Rejected",value:"rejected"}]},ge=e=>{let{boosterAddress:t,onClose:s}=e;const{askMint:a}=(0,r.useSelector)((e=>e.boosters[t])),[i,u]=(0,o.useState)(!1),[x,j]=(0,o.useState)(!1),[g,b]=(0,o.useState)(0),[f,A]=(0,o.useState)(""),[w,T]=(0,o.useState)([]),v=te(a.toBase58()),k=G(t),{metaBooster:{payRate:S},loading:B}=E(t),{getDecimals:R}=(0,n.useMint)(),{buy:N,loading:z}=(()=>{const e=(0,r.useSelector)((e=>e.voucherPrinters)),{senExchange:t}=ne(),[s,n]=(0,o.useState)(!1),a=(0,o.useCallback)(((t,s)=>{const r=[],n=Object.keys(e).sort(((t,s)=>e[s].discount.gt(e[t].discount)?1:-1));for(const o of n){const n=e[o];let a=n.total.toNumber();if(n.retailer.toBase58()===t.toString())for(;a>0||r.length<s;)r.push(o),a-=1}if(r.length<s)throw new Error("Insufficient voucher");return r}),[e]),l=(0,o.useCallback)((async e=>{let{retailer:s,bidAmount:r,askAmount:o,lockTime:l,appliedNFTs:i,discount:d}=e;try{n(!0);const e={appliedNFTs:i,discount:d},{digest:c}=await m.methods.order.set(e),{provider:u}=t,h=new C.web3.Transaction,x=C.web3.Keypair.generate(),p=[x],{tx:j}=await t.initializeOrder({retailer:s,bidAmount:r,askAmount:o,lockTime:l,sendAndConfirm:!1,order:x,metadata:c});h.add(j);const y=a(s,i.length);await Promise.all(i.map((async(e,s)=>{const r=C.web3.Keypair.generate(),{tx:n}=await t.lockVoucher({order:x.publicKey,voucherPrinter:y[s],mintNft:e,voucher:r,sendAndConfirm:!1});p.push(r),h.add(n)})));const g=await u.sendAndConfirm(h,p);I("Initialize Order",g)}catch(c){M(c)}finally{n(!1)}}),[a,t]);return{buy:l,loading:s}})(),O=2.5*w.length,F=(e=>{let{boosterAddress:t,amount:s,discount:n}=e;const{bidMint:a,askMint:l}=(0,r.useSelector)((e=>e.boosters[t])),i=oe(a.toBase58()),d=oe(l.toBase58()),c=y(a.toBase58())||0,u=y(l.toBase58())||0;return(0,o.useMemo)((()=>{const e=p.utilsBN.decimalize(i,c),t=p.utilsBN.decimalize(d,u),r=p.utilsBN.decimalize(s,u).mul(t);return i?r.mul(new(P())(n/100*ae)).div(e):new(P())(0)}),[s,u,d,c,i,n]).div(new(P())(ae))})({boosterAddress:t,amount:g,discount:S[f]+O}),D=(0,o.useCallback)((()=>{const e=Object.keys(S);let t="";for(const s of e)if(S[s]){t=s;break}return A(t)}),[S]);return(0,o.useEffect)((()=>{D()}),[D]),(0,c.jsxs)(l.Row,{justify:"space-between",gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Typography.Text,{children:["Token Buy-back offering:"," ",(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Selling your LP tokens with juicy profit. No fee, no slippage. The token will be unlocked after the selected period."})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{children:"You Sell"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Text,{type:"secondary",className:"caption",children:["Available:"," ",n.util.numeric(v.balance).format("0,0.[00]a")," ",(0,c.jsx)(d.MintSymbol,{mintAddress:a})]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(U,{value:g,onValue:b,prefix:(0,c.jsx)(d.MintSymbol,{mintAddress:a}),max:Number(v.balance),suffix:(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Button,{type:"text",size:"small",style:{background:"none"},onClick:()=>b(Number(v.balance)),children:"MAX"})})})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{align:"center",size:8,children:[(0,c.jsx)(l.Typography.Text,{children:"Lock time"}),(0,c.jsx)(l.Tooltip,{placement:"right",title:(0,c.jsx)(l.Typography.Text,{children:"For each lock time, there will be a corresponding Buy-back rate, you will receive tokens after the selected lock time."}),children:(0,c.jsx)(h.default,{name:"information-circle-outline"})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Spin,{spinning:B,size:"small",children:(0,c.jsx)(l.Radio.Group,{size:"middle",onChange:e=>A(e.target.value),style:{width:"100%"},value:f,children:(0,c.jsx)(l.Row,{gutter:[12,12],justify:"center",children:Object.keys(S).map((e=>{const t="No lock time"===e;return(0,c.jsx)(l.Col,{xs:12,md:8,children:(0,c.jsx)(l.Radio.Button,{disabled:!S[e],style:{width:"100%",textAlign:"center"},value:e,children:t?"None":e})},e)}))})})})}),(0,c.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,c.jsxs)(l.Space,{size:8,children:[(0,c.jsx)(l.Typography.Text,{children:"Boost"}),(0,c.jsx)(l.Switch,{disabled:!k.length,size:"small",checked:x,onChange:j})]})})]})}),x&&(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(X,{onSelectNFT:e=>{const t=[...w];return t.push(e),T(t)},boosterAddress:t,selectedNFTs:w,removeNFT:e=>{const t=[...w].filter((t=>t!==e));return T(t)}})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(_,{estimatedReceive:F,boosterAddress:t,discount:S[f],nftDiscount:O})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Checkbox,{checked:i,onChange:e=>u(e.target.checked),children:"I have read and agree with this transaction"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{size:"large",type:"primary",onClick:async()=>{const e=await R(a.toBase58()),r=je[f];await N({retailer:t,askAmount:p.utilsBN.decimalize(g,e),lockTime:new(P())(86400*r),bidAmount:F,appliedNFTs:w,discount:S[f]+O}),s()},loading:z,disabled:!i||!g||!F,block:!0,children:g?"Buy":"Enter an amount"})})]})},be=e=>{let{boosterAddress:t}=e;const[s,r]=(0,o.useState)(!1);return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(l.Button,{block:!0,size:"large",type:"primary",onClick:()=>r(!0),children:"Buy Now"}),(0,c.jsx)(l.Modal,{visible:s,closeIcon:(0,c.jsx)(h.default,{name:"close-outline"}),onCancel:()=>r(!1),footer:null,className:"card-manage",title:(0,c.jsx)(l.Typography.Title,{level:4,children:"Buy token"}),destroyOnClose:!0,children:(0,c.jsx)(ge,{boosterAddress:t,onClose:()=>r(!1)})})]})},fe=()=>{const e=(0,r.useSelector)((e=>e.voucherPrinters)),t=(0,o.useCallback)((t=>{let s=0;for(const{retailer:r}of Object.values(e))r.toBase58()===t&&s++;return s}),[e]);return{getAmountVoucher:t}},Ae=(0,o.memo)((e=>{let{boosterAddress:t}=e;const{getAmountVoucher:s}=fe(),r=s(t),{ui:{width:o}}=(0,n.useUI)(),a=o<575;return(0,c.jsx)(l.Card,{bodyStyle:{padding:"16px 24px"},children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{justify:"space-between",children:[(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:16,children:[(0,c.jsx)(x,{boosterAddress:t,size:32}),(0,c.jsx)(u,{boosterAddress:t}),!!r&&(0,c.jsx)(l.Tag,{style:{color:"#0FB5B8",background:"rgba(15, 181, 184, 0.1)",border:"none",borderRadius:4},children:"Boost"})]})}),!a&&(0,c.jsx)(l.Col,{children:(0,c.jsx)(be,{boosterAddress:t})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(H,{boosterAddress:t})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(O,{boosterAddress:t})}),a&&(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(be,{boosterAddress:t})})]})})})),Ce=e=>{let{onChange:t,boosterAddress:s}=e;const[a,i]=(0,o.useState)({category:he.LPHighToLow}),d=(0,r.useSelector)((e=>e.boosters)),{getDecimals:u}=(0,n.useMint)(),h=(0,o.useCallback)((async e=>{const{askTotal:t,askMint:s}=d[e],r=await u(s.toBase58())||0;return Number(p.utilsBN.undecimalize(t,r))}),[d,u]),x=(0,o.useCallback)((async()=>{const e={},r={},n=[...s];for(const t of n){const{metadata:s}=d[t],n=await h(t),{payRate:o}=await m.methods.booster.get(s),a=Math.max(...Object.values(o));e[t]=n,r[t]=a}const o=n.sort(((t,s)=>{const n=e[t],o=e[s],l=r[t],i=r[s];switch(a.category){case he.LPHighToLow:return o-n;case he.LPLowToHigh:return n-o;case he.RateHighToLow:return i-l;case he.RateLowToHigh:return l-i;default:return 0}}));return t(o)}),[s,d,h,t,a]);return(0,o.useEffect)((()=>{x()}),[x]),(0,c.jsx)(l.Select,{style:{width:170},onChange:e=>i({...a,category:e}),placement:"bottomRight",value:a.category,children:xe.map((e=>(0,c.jsx)(l.Select.Option,{value:e,children:e},e)))})};var we=s(93253);const Te=e=>{const t=(0,r.useSelector)((e=>e.boosters)),s=(()=>{const e=(0,r.useSelector)((e=>e.boosters));return(0,o.useMemo)((()=>Object.keys(e).filter((t=>{const{endAt:s}=e[t];if(s.isZero())return!0;const r=Date.now();return 1e3*s.toNumber()>=r}))),[e])})(),[a,l]=(0,o.useState)([]),{tokenProvider:i}=(0,n.useMint)(),d=(0,o.useCallback)((async()=>{if(!e)return l(s);const r=await i.find(e),n=new Map;for(const e of r)n.set(e.address,!0);const o=[];for(const e of s){const s=t[e];(n.has(s.bidMint.toBase58())||n.has(s.askMint.toBase58()))&&o.push(e)}return l(o)}),[t,e,i,s]);return(0,we.Z)((()=>d()),300,[d]),a},ve=e=>{let{onChange:t}=e;const[s,r]=(0,o.useState)(""),n=Te(s);return(0,o.useEffect)((()=>{t(n)}),[t,n]),(0,c.jsx)(l.Input,{placeholder:"Search LP, token",value:s,prefix:s?(0,c.jsx)(l.Button,{type:"text",style:{width:"auto",height:"auto",background:"transparent",marginLeft:-7},onClick:()=>r(""),icon:(0,c.jsx)(h.default,{name:"close-outline"})}):(0,c.jsx)(h.default,{style:{fontSize:"24px",marginLeft:-5},name:"search-outline"}),onChange:e=>r(e.target.value),className:"search-input"})},ke=(0,o.memo)((e=>{let{onChange:t,setIsBoost:s}=e;const[r,n]=(0,o.useState)([]);return(0,c.jsxs)(l.Row,{gutter:[12,12],align:"middle",children:[(0,c.jsx)(l.Col,{xs:24,md:16,lg:10,children:(0,c.jsx)(ve,{onChange:n})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(Ce,{boosterAddress:r,onChange:t})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:["Boost only",(0,c.jsx)(l.Switch,{onChange:s,size:"small"})]})})]})})),Se=()=>{const[e,t]=(0,o.useState)([]),[s,r]=(0,o.useState)(!1),{getAmountVoucher:n}=fe(),a=(0,o.useMemo)((()=>e.filter((e=>!(s&&!n(e))))),[e,n,s]);return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ke,{setIsBoost:r,onChange:t})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Row,{gutter:[16,16],children:a.length?a.map((e=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(i.default,{height:276,children:(0,c.jsx)(Ae,{boosterAddress:e})})},e))):(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Empty,{image:l.Empty.PRESENTED_IMAGE_SIMPLE,description:"No booster exist"})})})})]})},Be=e=>{let{label:t,children:s}=e;return(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,c.jsx)(l.Col,{span:24,children:s})]})},Re=()=>{const e=(0,r.useSelector)((e=>e.orders)),t=(0,r.useSelector)((e=>e.boosters)),s=(0,r.useSelector)((e=>e.settings.mode)),a=(0,n.useWalletAddress)(),l=(0,o.useMemo)((()=>{let r=new Set;for(const{retailer:n,authority:o}of Object.values(e)){if(s===ue.User&&o.toBase58()!==a)continue;const e=t[n.toBase58()];if(!e)continue;const{bidMint:l,askMint:i}=e;r.add(l.toBase58()),r.add(i.toBase58())}return Array.from(r)}),[t,s,e,a]);return l},Ne=()=>{const e=(0,r.useSelector)((e=>e.orders));return{getRedeemTime:(0,o.useCallback)((t=>{const{lockAt:s,lockTime:r,state:n}=e[t];return n.approved?r.isZero()?s.toNumber():s.add(r).toNumber():0}),[e])}},Ie=e=>{const t=(0,r.useSelector)((e=>e.boosters)),s=(0,r.useSelector)((e=>e.settings.mode)),{ownOrders:n}=L(),{getRedeemTime:a}=Ne(),l=(0,o.useMemo)((()=>{const r=Date.now()/1e3-e.time*de,o=n.filter((n=>{const{retailer:o,createAt:l,state:i,orderAddress:d}=n,{askMint:c,bidMint:u}=t[o.toBase58()],h=[c.toBase58(),u.toBase58()];if(e.status!==ie&&s===ue.User){const t=1e3*a(d),s=Date.now();if("ready"!==e.status&&(Object.keys(i)[0]!==e.status||i.approved&&t<=s))return!1;if("ready"===e.status&&(!i.approved||t>s))return!1}return(e.status===ie||s!==ue.Retailer||Object.keys(i)[0]===e.status)&&(!(l.toNumber()<r)&&!(e.token!==ie&&!h.includes(e.token)))}));return o}),[t,e,a,s,n]);return{filteredOrders:l}},Me=e=>{let{onChange:t}=e;const[s,n]=(0,o.useState)({token:ie,time:ye[0].value,status:ie}),a=Re(),i=(0,r.useSelector)((e=>e.settings.mode)),{filteredOrders:u}=Ie(s);return(0,o.useEffect)((()=>{t(u)}),[u,t]),(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:4,children:(0,c.jsx)(Be,{label:"Token",children:(0,c.jsxs)(l.Select,{style:{width:"100%"},onChange:e=>n({...s,token:e}),placement:"bottomRight",value:s.token,children:[(0,c.jsx)(l.Select.Option,{value:ie,children:"All token"}),a.map((e=>(0,c.jsx)(l.Select.Option,{value:e,children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(d.MintAvatar,{mintAddress:e}),(0,c.jsx)(d.MintSymbol,{mintAddress:e})]})},e)))]})})}),(0,c.jsx)(l.Col,{span:4,children:(0,c.jsx)(Be,{label:"Time",children:(0,c.jsx)(l.Select,{style:{width:"100%"},onChange:e=>n({...s,time:e}),placement:"bottomRight",value:s.time,children:ye.map((e=>(0,c.jsx)(l.Select.Option,{value:e.value,children:e.key},e.value)))})})}),(0,c.jsx)(l.Col,{span:4,children:(0,c.jsx)(Be,{label:"Status",children:(0,c.jsx)(l.Select,{style:{width:"100%"},onChange:e=>n({...s,status:e}),placement:"bottomRight",value:s.status,children:me[i].map((e=>(0,c.jsx)(l.Select.Option,{value:e.value,children:e.key},e.value)))})})})]})},Ee=e=>{let{amount:t,mintAddress:s,size:r}=e;const o=y(s)||0;return(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(d.MintAvatar,{mintAddress:s,size:r}),(0,c.jsx)(l.Typography.Text,{children:n.util.numeric(p.utilsBN.undecimalize(t,o)).format("0,0.[0000]")}),(0,c.jsx)(l.Typography.Text,{type:"secondary",children:(0,c.jsx)(d.MintSymbol,{mintAddress:s})})]})},ze=e=>{let{orderAddress:t}=e;const{retailer:s,bidAmount:n}=(0,r.useSelector)((e=>e.orders[t])),{bidMint:o}=(0,r.useSelector)((e=>e.boosters[s.toBase58()]));return(0,c.jsx)(Ee,{amount:n,mintAddress:o.toBase58()})},Pe=e=>{let{orderAddress:t}=e;const{retailer:s,askAmount:n}=(0,r.useSelector)((e=>e.orders[t])),{askMint:o}=(0,r.useSelector)((e=>e.boosters[s.toBase58()]));return(0,c.jsx)(Ee,{amount:n,mintAddress:o.toBase58()})};var Oe=s(11522);const Fe=e=>{let{orderAddress:t}=e;const{cancelOrder:s,loading:n}=(e=>{const t=(0,r.useSelector)((e=>e.vouchers)),{senExchange:s}=ne(),[n,a]=(0,o.useState)(!1),l=(0,o.useMemo)((()=>Object.keys(t).filter((s=>t[s].order.toBase58()===e.toString()))),[e,t]);return{cancelOrder:(0,o.useCallback)((async()=>{try{a(!0);const r=new C.web3.Transaction,{provider:n}=s,{tx:o}=await s.cancel({order:e,sendAndConfirm:!1});r.add(o),l.forEach((async n=>{const{tx:o}=await s.unlockVoucher({order:e,mintNft:t[n].mintNft,voucher:n,sendAndConfirm:!1});r.add(o)}));const i=await n.sendAndConfirm(r);return I("Canceled Order",i)}catch(r){M(r)}finally{a(!1)}}),[e,s,l,t]),loading:n}})(t);return(0,c.jsx)(l.Button,{onClick:s,loading:n,type:"ghost",children:"Cancel"})},De=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t].state)),{redeemOrder:n,loading:a}=(()=>{const[e,t]=(0,o.useState)(!1),{senExchange:s}=ne();return{redeemOrder:(0,o.useCallback)((async e=>{try{t(!0);const{txId:r}=await s.redeem({order:e});I("Redeemed",r)}catch(r){M(r)}finally{t(!1)}}),[s]),loading:e}})(),{getRedeemTime:i}=Ne(),d=i(t);return(0,c.jsx)(l.Button,{loading:a,onClick:()=>n(t),type:"primary",disabled:!s.approved||1e3*d>Date.now(),size:"small",children:"Redeem"})},Le=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t].state)),n=(0,r.useSelector)((e=>e.orders[t].askReserve)),{revokeOrder:a,loading:i}=(()=>{const[e,t]=(0,o.useState)(!1),{senExchange:s}=ne();return{revokeOrder:(0,o.useCallback)((async e=>{try{t(!0);const{txId:r}=await s.revoke({order:e});I("Revoked",r)}catch(r){M(r)}finally{t(!1)}}),[s]),loading:e}})();return(0,c.jsx)(l.Button,{loading:i,disabled:!s.rejected||n.isZero(),onClick:()=>a(t),size:"small",type:"primary",children:"Revoke"})},Ve=e=>{let{orderState:t,orderAddress:s}=e;return t.open?(0,c.jsx)(Fe,{orderAddress:s}):t.approved?(0,c.jsx)(De,{orderAddress:s}):t.rejected?(0,c.jsx)(Le,{orderAddress:s}):(0,c.jsx)(l.Button,{type:"text",onClick:()=>window.open(Oe.util.explorer(s),"_blank"),children:"Detail"})},qe={approved:[12,161,191],open:[212,177,6],rejected:[249,87,94],done:[20,224,65],canceled:[249,87,94],ready:[64,169,255],uninitialized:[0,0,0]},Qe=e=>{let{state:t,orderAddress:s}=e;const{mode:n}=(0,r.useSelector)((e=>e.settings)),{getRedeemTime:a}=Ne(),i=(0,o.useMemo)((()=>{if(!s||!t.approved)return Object.keys(t)[0];return 1e3*a(s)<=Date.now()?"ready":Object.keys(t)[0]}),[a,s,t]),d=e=>{const t=qe[i];return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${e||1})`};return(0,c.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:d(),textTransform:"capitalize"},color:d(.1),children:n===ue.User&&t.open?"Waiting":i})},He=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t].createAt)),{getRedeemTime:n}=Ne(),o=n(t),a=o||s.toNumber();return(0,c.jsx)(l.Typography.Text,{children:q()(1e3*a).format(le)})},Ue=e=>{const{askAmount:t,bidAmount:s,retailer:n}=(0,r.useSelector)((t=>t.orders[e])),{askMint:o,bidMint:a}=(0,r.useSelector)((e=>e.boosters[n.toBase58()])),l=y(a.toBase58())||0,i=y(o.toBase58())||0,d=oe(a.toBase58()),c=oe(o.toBase58()),u=Number(p.utilsBN.undecimalize(s,l)),h=Number(p.utilsBN.undecimalize(t,i))*c;return{profit:h?(h-u*d)/h:0}},_e=e=>{let{orderAddress:t}=e;const{profit:s}=Ue(t);return(0,c.jsx)(l.Typography.Text,{style:{color:-s>=0?"#14E041":"#F9575E"},children:n.util.numeric(-s).format("0,0.[00]%")})},We=[{title:"ORDERED TIME",dataIndex:"createAt",render:e=>(0,c.jsx)(l.Typography.Text,{children:q()(1e3*e.toNumber()).format(le)})},{title:"SELL",dataIndex:"orderAddress",render:e=>(0,c.jsx)(Pe,{orderAddress:e})},{title:"BUY",dataIndex:"orderAddress",render:e=>(0,c.jsx)(ze,{orderAddress:e})},{title:"REDEMPTION TIME",dataIndex:"orderAddress",render:e=>(0,c.jsx)(He,{orderAddress:e})},{title:"PROFIT",key:"orderAddress",dataIndex:"orderAddress",render:e=>(0,c.jsx)(_e,{orderAddress:e})},{title:"STATUS",dataIndex:"state",render:(e,t)=>{let{orderAddress:s}=t;return(0,c.jsx)(Qe,{state:e,orderAddress:s})}},{title:"ACTIONS",dataIndex:"state",render:(e,t)=>{let{orderAddress:s}=t;return(0,c.jsx)(Ve,{orderState:e,orderAddress:s})}}],Ke=e=>{let{dataSource:t,setOrders:s}=e;return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,style:{paddingRight:24,paddingLeft:24},children:(0,c.jsx)(Me,{onChange:s})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Table,{columns:We,pagination:!1,dataSource:t,rowKey:e=>e.orderAddress,scroll:{x:780}})})]})},Ze=e=>{let{cardId:t,children:s,cardHeader:r}=e;const[n,a]=(0,o.useState)(),i=n?"chevron-up-outline":"chevron-down-outline";return(0,c.jsxs)(l.Row,{gutter:[16,16],className:"expand-card",children:[(0,c.jsx)(l.Col,{span:24,children:r}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{justify:"center",children:[(0,c.jsx)(l.Col,{span:24,className:"expand-card-collapse",children:(0,c.jsx)(l.Collapse,{activeKey:n,bordered:!1,children:(0,c.jsx)(l.Collapse.Panel,{header:!1,showArrow:!1,children:s},t)})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Button,{type:"text",size:"small",icon:(0,c.jsx)(h.default,{name:i}),onClick:()=>a(n?void 0:t)})})]})})]})},Ge=e=>{let{orderAddress:t}=e;const{askAmount:s,bidAmount:n,retailer:o,state:a}=(0,r.useSelector)((e=>e.orders[t])),i=o.toBase58()||"",{askMint:d,bidMint:u}=(0,r.useSelector)((e=>e.boosters[i]));return(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(Ee,{amount:s,mintAddress:d.toBase58()}),(0,c.jsx)(h.default,{name:"arrow-down-outline"}),(0,c.jsx)(Ee,{amount:n,mintAddress:u.toBase58()})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{align:"end",size:12,direction:"vertical",children:[(0,c.jsx)(De,{orderAddress:t}),(0,c.jsx)(Qe,{state:a})]})})]})},Je=e=>{let{label:t,value:s}=e;return(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:t})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Typography.Text,{children:s})})]})},Ye=e=>{let{onClose:t,onChange:s}=e;const[n,a]=(0,o.useState)({token:ie,time:ye[0].value,status:ie}),i=(0,r.useSelector)((e=>e.settings.mode)),u=Re(),{filteredOrders:h}=Ie(n),x=(0,o.useCallback)((()=>(s(h),t(!1))),[h,s,t]);return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Be,{label:"Token",children:(0,c.jsxs)(l.Select,{style:{width:"100%"},onChange:e=>a({...n,token:e}),placement:"bottomRight",value:n.token,children:[(0,c.jsx)(l.Select.Option,{value:ie,children:"All token"}),u.map((e=>(0,c.jsx)(l.Select.Option,{value:e,children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(d.MintAvatar,{mintAddress:e}),(0,c.jsx)(d.MintSymbol,{mintAddress:e})]})},e)))]})})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Be,{label:"Time",children:(0,c.jsx)(l.Radio.Group,{size:"middle",onChange:e=>a({...n,time:e.target.value}),style:{width:"100%"},value:n.time,children:(0,c.jsx)(l.Row,{gutter:[12,12],children:ye.map((e=>(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(l.Radio.Button,{style:{textAlign:"center",width:"100%"},value:e.value,children:e.key})},e.value)))})})})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Be,{label:"Status",children:(0,c.jsx)(l.Radio.Group,{size:"middle",onChange:e=>a({...n,status:e.target.value}),style:{width:"100%"},value:n.status,children:(0,c.jsx)(l.Row,{gutter:[12,12],children:me[i].map((e=>(0,c.jsx)(l.Col,{span:8,children:(0,c.jsx)(l.Radio.Button,{style:{textAlign:"center",width:"100%"},value:e.value,children:e.key})},e.value)))})})})}),(0,c.jsx)(l.Col,{span:24}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{onClick:x,type:"primary",block:!0,children:"Confirm"})})]})},Xe=e=>{let{onChange:t}=e;const[s,r]=(0,o.useState)(!1),{ownOrders:n}=L();return(0,o.useEffect)((()=>{t(n)}),[n,t]),(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(l.Button,{style:{background:"transparent"},onClick:()=>r(!0),icon:(0,c.jsx)(h.default,{name:"funnel-outline"})}),(0,c.jsx)(l.Modal,{title:(0,c.jsx)(l.Typography.Title,{level:4,children:" Filter"}),footer:null,closeIcon:(0,c.jsx)(h.default,{name:"close-outline"}),onCancel:()=>r(!1),visible:s,className:"card-manage",children:(0,c.jsx)(Ye,{onChange:t,onClose:r})})]})},$e=e=>{let{dataSource:t,setOrders:s}=e;const{getRedeemTime:r}=Ne();return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,style:{paddingLeft:24,paddingRight:24},children:(0,c.jsx)(Xe,{onChange:s})}),t.map((e=>{let{orderAddress:t,lockTime:s,createAt:n}=e;const o=r(t);return(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Ze,{cardId:t,cardHeader:(0,c.jsx)(Ge,{orderAddress:t}),children:(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Ordered time",value:q()(1e3*n.toNumber()).format(le)})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Lock time",value:`${s.div(new(P())(de)).toString()} days `})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Redemption time",value:o?q()(1e3*o).format(le):"--"})})]})})},t)}))]})},et=()=>{const[e,t]=(0,o.useState)([]),[s,r]=(0,o.useState)(1),{ui:{width:a}}=(0,n.useUI)(),i=a<768;return(0,c.jsx)(l.Card,{bodyStyle:{padding:"24px 0px"},children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:i?(0,c.jsx)($e,{dataSource:e.slice(0,10*s),setOrders:t}):(0,c.jsx)(Ke,{dataSource:e.slice(0,10*s),setOrders:t})}),(0,c.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,c.jsx)(l.Button,{onClick:()=>r(s+1),disabled:10*s>=e.length,children:"View more"})})]})})},{Panel:tt}=l.Collapse,st=[{question:" What is the Sen Booster?",answer:"Sen Booster is an exchange that allows users to buy tokens directly at a cheaper price from retailers by selling their Liquidity pool (LP)."},{question:" How do I buy a token?",answer:"First, find the LP and token pair you want to exchange with the best Buy-back rate. Next, click the Buy now button, then enter the amount of LP you want to sell and choose the lock time with the rate that suits you. You can use NFTs to increase the Buy-back rate if necessary."},{question:" What is Buy-back rate?",answer:"It is the token exchange rate you get in proportion to the lock time from the retailers."},{question:" What is the NFT used for?",answer:"During the token purchase process, you can enable Boost toggle to use NFTs to increase the Buy-back rate, there are a total of 3 slots with each use will be added a certain rate."},{question:" When and where can I redeem my token?",answer:"In the Redeem tab, you can track your orders. After the lock time click the Redeem button to get your token."},{question:" How do I become a retailer?",answer:"Click on the icon button and enable Retailer mode then you need to create a LP and token pair to start trading."}];const rt=function(){return(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:3,children:"FAQ"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Collapse,{defaultActiveKey:["0"],bordered:!1,expandIconPosition:"end",ghost:!0,children:st.map(((e,t)=>(0,c.jsx)(tt,{header:(0,c.jsx)(l.Typography.Text,{children:`${t+1}. ${e.question}`}),children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:e.answer})},t)))})})]})},nt=s.p+"static/media/banner_booster_desktop.6816c1de60f25d901187.png",ot=s.p+"static/media/booster_material.d82ec4aabe4c7182d3bc.png",at=()=>(0,c.jsxs)(l.Card,{className:"banner",bordered:!1,children:[(0,c.jsx)(l.Image,{className:"banner-background",preview:!1,src:nt}),(0,c.jsxs)(l.Row,{gutter:[24,24],className:"banner-body",children:[(0,c.jsx)(l.Col,{span:24,className:"banner-material",children:(0,c.jsx)(l.Image,{preview:!1,src:ot})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{direction:"vertical",size:20,children:[(0,c.jsxs)(l.Typography.Title,{level:1,style:{color:"#0B358F",lineHeight:"120%"},children:["Buy your Fav Tokens ",(0,c.jsx)("br",{})," at Better than Market price"]}),(0,c.jsxs)(l.Space,{children:[(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(h.default,{name:"checkmark-circle",style:{fontSize:29,color:"#0FB5B8"}}),(0,c.jsx)(l.Typography.Title,{level:5,className:"typography-banner-5",children:"Boost with NFTs"})]}),(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(h.default,{name:"checkmark-circle",style:{fontSize:29,color:"#0FB5B8"}}),(0,c.jsx)(l.Typography.Title,{level:5,className:"typography-banner-5",children:"Zero Fee & Slippage"})]})]})]})})]})]}),lt=e=>{let{children:t}=e;return(0,c.jsx)(l.Row,{justify:"center",children:(0,c.jsx)(l.Col,{xs:24,md:20,lg:16,children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(at,{})}),(0,c.jsx)(l.Col,{span:24,children:t})]})})})},{manifest:{appId:it}}=R,dt=`/app/${it}`,ct=()=>{const{search:e,pathname:t}=(0,a.useLocation)(),s=(0,a.useHistory)(),r=(0,o.useMemo)((()=>new URLSearchParams(e)),[e]),n=(0,o.useCallback)((e=>r.get(e)),[r]),l=(0,o.useCallback)((()=>{const e={};r.forEach(((t,s)=>{e[s]=t}));return e}),[r]),i=(0,o.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=l();!1===r&&(t=Object.assign(n,t));const o=new URLSearchParams(t);o&&(e+=`?${o.toString()}`),s.push(`${dt}${e}`)}),[l,s]);return{getQuery:n,getAllQuery:l,pushHistory:i,appRoute:dt,pathname:t}};var ut=s(19289);const ht="settings",xt={mode:ue.User},pt=(0,ut.createAsyncThunk)(`${ht}/setMode`,(async e=>({mode:e}))),jt=(0,ut.createSlice)({name:ht,initialState:xt,reducers:{},extraReducers:e=>{e.addCase(pt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{manifest:{appId:yt}}=R,mt=[{label:"Booster list",value:ce.BoostList},{label:"Order list",value:ce.OrderList}],gt=[{label:"Booster",value:ce.Booster},{label:"Redeem",value:ce.Redeem}],bt=e=>{let{tabId:t,setTabId:s,scrollToFAQ:a}=e;const{mode:i}=(0,r.useSelector)((e=>e.settings)),{pushHistory:d}=ct(),u=(0,r.useDispatch)(),x=(0,n.useWalletAddress)(),p=new n.PDB(x).createInstance(yt),j=(0,o.useMemo)((()=>i===ue.Retailer),[i]);return(0,c.jsxs)(l.Row,{align:"middle",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Segmented,{options:j?mt:gt,value:t,onChange:s,size:"large"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:12,children:[!j&&(0,c.jsx)(l.Button,{icon:(0,c.jsx)(h.default,{name:"arrow-down-outline"}),onClick:a,ghost:!0,children:"FAQ"}),(0,c.jsx)(l.Popover,{placement:"topRight",content:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Text,{children:"Retailer mode"}),(0,c.jsx)(l.Switch,{size:"small",checked:j,onChange:async e=>{const t=e?ue.Retailer:ue.User;return u(pt(t)),await p.setItem("mode",t),d(`/${t}`)}})]}),trigger:"click",overlayClassName:"slippage",children:(0,c.jsx)(l.Button,{ghost:!0,icon:(0,c.jsx)(h.default,{name:"cog-outline"})})})]})})]})};const ft=function(){const[e,t]=(0,o.useState)(ce.Booster),s=(0,o.useRef)(null);return(0,c.jsx)(lt,{children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(bt,{tabId:e,setTabId:t,scrollToFAQ:()=>{if(s.current)return s.current.scrollIntoView()}})}),(0,c.jsx)(l.Col,{span:24,children:e===ce.Booster?(0,c.jsx)(Se,{}):(0,c.jsx)(et,{})}),(0,c.jsx)(l.Col,{span:24,ref:s,children:(0,c.jsx)(rt,{})})]})})};var At=s(51518),Ct=s.n(At);const wt=e=>{let{boosterAddress:t}=e;const[s,n]=(0,o.useState)({}),a=(0,r.useSelector)((e=>e.boosters[t].metadata)),i=(0,o.useCallback)((async()=>{const e=await m.methods.booster.get(a);return e.payRate?n(e.payRate):n({})}),[a]);return(0,o.useEffect)((()=>{i()}),[i]),(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:5,children:"Pay rate"})}),(0,c.jsx)(l.Col,{span:14,children:(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"Lock time"}),Object.keys(s).map((e=>(0,c.jsx)(l.Typography.Text,{children:e},e)))]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"Rate"}),Object.values(s).map((e=>(0,c.jsxs)(l.Typography.Text,{children:[e," %"]},e)))]})})]})})]})},Tt=e=>{let{mintAddress:t}=e;const[s,r]=(0,o.useState)(!1),{nftInfo:a}=K(t);return(0,c.jsxs)(l.Row,{align:"middle",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{children:null===a||void 0===a?void 0:a.name})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{style:{cursor:"pointer"},children:[(0,c.jsx)(l.Typography.Text,{onClick:()=>window.open(n.util.explorer(t),"_blank"),type:"secondary",underline:!0,children:(0,j.shortenAddress)(t)}),(0,c.jsx)(l.Tooltip,{title:"Copied",visible:s,children:(0,c.jsx)(Ct(),{text:t,children:(0,c.jsx)(h.default,{onClick:async()=>{r(!0),await n.util.asyncWait(1500),r(!1)},name:"copy-outline"})})})]})})]})},vt=e=>{let{value:t,label:s}=e;return(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{flex:"auto",children:s}),(0,c.jsx)(l.Col,{children:t})]})},kt=e=>{let{boosterAddress:t}=e;const s=G(t);return(0,c.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(vt,{label:(0,c.jsx)(l.Typography.Title,{level:5,children:"Boost by NFT"}),value:(0,c.jsx)(l.Typography.Text,{children:s.length?"Enable":"Disable"})})}),s.map((e=>{let{collection:t}=e;return(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Tt,{mintAddress:t.toBase58()})},t.toBase58())}))]})},St=e=>{let{boosterAddress:t}=e;const[s,a]=(0,o.useState)(""),{bidMint:i,askMint:u,startAt:x,endAt:p}=(0,r.useSelector)((e=>e.boosters[t])),{metaBooster:{budget:y},loading:m}=E(t),g=async e=>{a(e),await n.util.asyncWait(1500),a("")};return(0,c.jsx)(l.Card,{className:"card-manage-body",bordered:!1,children:(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:5,children:"General information"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{wrap:!1,children:[(0,c.jsx)(l.Col,{span:9,children:(0,c.jsx)(D,{label:"Buy-back LP address",value:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Text,{children:(0,j.shortenAddress)(u.toBase58())}),(0,c.jsx)(l.Tooltip,{title:"Copied",visible:s===u.toBase58(),children:(0,c.jsx)(Ct(),{text:u.toBase58(),children:(0,c.jsx)(l.Button,{type:"text",onClick:()=>g(u.toBase58()),icon:(0,c.jsx)(h.default,{name:"copy-outline"})})})})]})})}),(0,c.jsx)(l.Col,{span:9,children:(0,c.jsx)(D,{label:"Pay mint address",value:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Text,{children:(0,j.shortenAddress)(i.toBase58())}),(0,c.jsx)(l.Tooltip,{title:"Copied",visible:s===i.toBase58(),children:(0,c.jsx)(Ct(),{text:i.toBase58(),children:(0,c.jsx)(l.Button,{type:"text",onClick:()=>g(i.toBase58()),icon:(0,c.jsx)(h.default,{name:"copy-outline"})})})})]})})})]})}),(0,c.jsx)(l.Col,{span:24}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{justify:"space-between",wrap:!1,children:[(0,c.jsx)(l.Col,{span:9,children:(0,c.jsx)(D,{label:"Start date",value:(0,c.jsx)(l.Typography.Text,{children:q()(1e3*x.toNumber()).format(le)})})}),(0,c.jsx)(l.Col,{span:9,children:(0,c.jsx)(D,{label:"End date",value:(0,c.jsx)(l.Typography.Text,{children:q()(1e3*p.toNumber()).format(le)})})}),(0,c.jsx)(l.Col,{span:6,children:(0,c.jsx)(D,{label:"Budget",value:(0,c.jsx)(l.Spin,{spinning:m,size:"small",children:(0,c.jsxs)(l.Typography.Text,{children:[(0,j.numeric)(y).format("0.0,[000]")," ",(0,c.jsx)(d.MintSymbol,{mintAddress:i})]})})})})]})}),(0,c.jsx)(l.Col,{span:24}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(wt,{boosterAddress:t})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(kt,{boosterAddress:t})})]})})},Bt=e=>{let{boosterAddress:t}=e;const[s,n]=(0,o.useState)(0),a=(0,r.useSelector)((e=>e.boosters[t].bidMint)),{updateBudget:i,loading:u}=(()=>{const[e,t]=(0,o.useState)(!1),{senExchange:s}=ne();return{updateBudget:(0,o.useCallback)((async e=>{let{metadata:r,boosterAddress:n}=e;try{t(!0);const{txId:e}=await s.updateRetailerMetaData({retailer:n,metadata:r,sendAndConfirm:!0});I("Updated budget",e)}catch(o){M(o)}finally{t(!1)}}),[s]),loading:e}})(),{metaBooster:h,loading:x}=E(t);return(0,o.useEffect)((()=>{n(h.budget)}),[h.budget]),(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{direction:"vertical",style:{width:"100%"},children:[(0,c.jsx)(l.Typography.Text,{children:"Amount"}),(0,c.jsx)(U,{value:s,onValue:n,prefix:(0,c.jsx)(d.MintSymbol,{mintAddress:a}),disabled:x})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{loading:u,size:"large",block:!0,type:"primary",onClick:async()=>{const e={...h,budget:s},{digest:r}=await m.methods.booster.set(e);return i({boosterAddress:t,metadata:r})},disabled:x,children:"Update"})})]})},Rt=e=>{let{boosterAddress:t}=e;const{freezeBooster:s,loading:r}=(()=>{const[e,t]=(0,o.useState)(!1),{senExchange:s}=ne();return{freezeBooster:(0,o.useCallback)((async e=>{let{boosterAddress:r}=e;try{t(!0);const{txId:e}=await s.freezeRetailer({retailer:r,sendAndConfirm:!0});I("Freezed",e)}catch(n){M(n)}finally{t(!1)}}),[s]),loading:e}})();return(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Badge,{status:"success"}),(0,c.jsxs)(l.Typography.Text,{type:"secondary",children:["Current status: ",(0,c.jsx)("span",{style:{color:"#212433"},children:"Active"})]})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{align:"start",children:[(0,c.jsx)(h.default,{name:"information-circle-outline"}),(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Freezing a booster will prevent all actions until the booster has been thawed."})]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{onClick:()=>s({boosterAddress:t}),block:!0,type:"primary",size:"large",loading:r,children:"Freeze"})})]})},Nt=e=>{let{boosterAddress:t}=e;const{thawBooster:s,loading:r}=(()=>{const[e,t]=(0,o.useState)(!1),{senExchange:s}=ne();return{thawBooster:(0,o.useCallback)((async e=>{let{boosterAddress:r}=e;try{t(!0);const{txId:e}=await s.thawRetailer({retailer:r,sendAndConfirm:!0});I("Thawed",e)}catch(n){M(n.message)}finally{t(!1)}}),[s]),loading:e}})();return(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Badge,{status:"error"}),(0,c.jsxs)(l.Typography.Text,{type:"secondary",children:["Current status: ",(0,c.jsx)("span",{style:{color:"#F9575E"},children:"Frozen"})]})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{align:"start",children:[(0,c.jsx)(h.default,{name:"information-circle-outline"}),(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Thaw a booster will active all actions."})]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{onClick:()=>s({boosterAddress:t}),block:!0,type:"primary",size:"large",loading:r,style:{background:"#F9575E",border:"none"},children:"Thaw"})})]})},{TabPane:It}=l.Tabs,Mt=e=>{let{boosterAddress:t}=e;const[s,n]=(0,o.useState)(!1),a=(0,r.useSelector)((e=>e.boosters[t]));return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(l.Button,{ghost:!0,onClick:()=>n(!0),block:!0,children:"Manage"}),(0,c.jsx)(l.Modal,{className:"card-manage",closeIcon:(0,c.jsx)(h.default,{name:"close-outline"}),footer:null,onCancel:()=>n(!1),visible:s,title:(0,c.jsx)(l.Typography.Title,{level:4,children:"Manage booster"}),children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(St,{boosterAddress:t})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Tabs,{children:[(0,c.jsx)(It,{tab:"Budget",children:(0,c.jsx)(Bt,{boosterAddress:t})},"budget"),(0,c.jsx)(It,{tab:"Freeze/Thaw",children:a.state.frozen?(0,c.jsx)(Nt,{boosterAddress:t}):(0,c.jsx)(Rt,{boosterAddress:t})},"freeze-thaw")]})})]})})]})},Et=e=>{let{boosterAddress:t}=e;const{askMint:s,bidMint:n,startAt:o,endAt:a}=(0,r.useSelector)((e=>e.boosters[t])),i=G(t);return(0,c.jsx)(l.Card,{children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{justify:"space-between",align:"middle",children:[(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{align:"end",label:"Pay",mintAddress:n.toBase58()})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(h.default,{name:"arrow-forward-outline",style:{fontSize:20}})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{label:"Buy-back",mintAddress:s.toBase58()})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{justify:"space-between",wrap:!1,children:[(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{label:"Start date",value:(0,c.jsx)(l.Typography.Text,{children:q()(1e3*o.toNumber()).format(le)})})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{label:"End date",value:(0,c.jsx)(l.Typography.Text,{children:a.isZero()?"Unlimited":q()(1e3*a.toNumber()).format(le)})})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{label:"Boost",value:(0,c.jsx)(l.Typography.Text,{children:i.length?"Enable":"Disable"})})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(O,{boosterAddress:t})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Mt,{boosterAddress:t})})]})})},zt=e=>{let{onChange:t}=e;const[s,a]=(0,o.useState)(!0),[i,d]=(0,o.useState)(!0),[u,h]=(0,o.useState)(!1),{ownBoosters:x}=(()=>{const e=(0,r.useSelector)((e=>e.boosters)),t=(0,n.useWalletAddress)();return{ownBoosters:(0,o.useMemo)((()=>Object.keys(e).filter((s=>e[s].authority.toBase58()===t))),[e,t])}})(),{getAmountVoucher:p}=fe(),j=(0,r.useSelector)((e=>e.boosters)),y=(0,o.useMemo)((()=>{const e=[];for(const t of x){const{state:r,endAt:n}=j[t],o=Date.now(),a=1e3*n.toNumber();let l=!0;s&&a<o&&a&&(l=!1),i&&r.frozen&&(l=!1),u&&!p(t)&&(l=!1),l&&e.push(t)}return e}),[j,p,u,s,i,x]);return(0,o.useEffect)((()=>{t(y)}),[y,t]),(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Checkbox,{checked:s,onChange:e=>a(e.target.checked)}),(0,c.jsx)(l.Typography.Text,{children:"Hide expired booster"})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Checkbox,{checked:i,onChange:e=>d(e.target.checked)}),(0,c.jsx)(l.Typography.Text,{children:"Hide freeze booster"})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:["Boost only",(0,c.jsx)(l.Switch,{onChange:h,size:"small"})]})})]})},Pt=()=>{const[e,t]=(0,o.useState)([]),{pushHistory:s}=ct(),{ui:{width:r}}=(0,n.useUI)(),a=r<767;return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,c.jsx)(l.Col,{xs:24,md:20,lg:20,xl:12,children:(0,c.jsx)(zt,{onChange:t})}),(0,c.jsx)(l.Col,{xs:24,md:4,lg:4,xl:12,style:{textAlign:"right"},children:(0,c.jsx)(l.Button,{type:"primary",onClick:()=>s("/create-booster"),block:a,children:"Add booster"})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Row,{gutter:[24,24],children:e.length?e.map((e=>(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(Et,{boosterAddress:e})},e))):(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Empty,{image:l.Empty.PRESENTED_IMAGE_SIMPLE,description:"You have not created any booster"})})})})]})};var Ot=s(17604);const Ft=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t].state)),{approveOrder:n,loading:a}=(()=>{const[e,t]=(0,o.useState)(!1),{senExchange:s}=ne();return{approveOrder:(0,o.useCallback)((async e=>{try{t(!0);const r=new C.web3.Transaction,n=new C.web3.PublicKey(e),{tx:o}=await s.approveOrder({order:n,sendAndConfirm:!1});r.add(o);const{tx:a}=await s.collectOrder({order:n,sendAndConfirm:!1});r.add(a);const{provider:l}=s,i=await l.sendAndConfirm(r);return I("Approved",i)}catch(r){M(r)}finally{t(!1)}}),[s]),loading:e}})();return(0,c.jsx)(l.Button,{type:"primary",loading:a,disabled:!s.open,onClick:()=>n(t),size:"small",children:"Approve"})},Dt=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t].state)),{rejectOrder:n,loading:a}=(()=>{const[e,t]=(0,o.useState)(!1),{senExchange:s}=ne();return{rejectOrder:(0,o.useCallback)((async e=>{let{orderAddress:r}=e;try{t(!0);const e=new C.web3.PublicKey(r),{txId:n}=await s.rejectOrder({order:e});I("Rejected",n)}catch(n){M(n)}finally{t(!1)}}),[s]),loading:e}})();return(0,c.jsx)(l.Button,{loading:a,disabled:!s.open,onClick:()=>n({orderAddress:t}),size:"small",children:"Reject"})},Lt=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.vouchers)),n=(0,r.useSelector)((e=>e.orders[t])),a=n.authority.toBase58(),l=n.retailer.toBase58(),i=(0,o.useMemo)((()=>{let e=0;for(const t in s){const{authority:r,retailer:n}=s[t];r.toBase58()===a&&l===n.toBase58()&&e++}return e}),[l,a,s]);return{nftUsedInThisBooster:i}},Vt=e=>{let{orderAddress:t}=e;const[s,a]=(0,o.useState)({appliedNFTs:[],discount:0}),i=(0,r.useSelector)((e=>e.orders[t])),d=(0,r.useSelector)((e=>e.boosters))[i.retailer.toBase58()].askMint.toBase58()||"",u=oe(d),{nftUsedInThisBooster:h}=Lt({orderAddress:t}),x=(0,o.useCallback)((async()=>{try{const e=await m.methods.order.get(i.metadata);e&&a(e)}catch(e){(0,Ot.c)(e)}}),[i.metadata]);return(0,o.useEffect)((()=>{x()}),[x]),(0,c.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Row,{gutter:[48,48],children:[(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{label:"Market price",value:(0,c.jsxs)(l.Typography.Text,{children:["1 LP = ",n.util.numeric(u).format("0,0.[0000]")," USDC"]})})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{label:"Used NFT slot",value:(0,c.jsx)(l.Typography.Text,{children:h})})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(D,{label:"Total boost rate",value:(0,c.jsxs)(l.Typography.Text,{children:[s.discount,"%"]})})})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(Dt,{orderAddress:t}),(0,c.jsx)(Ft,{orderAddress:t})]})})]})},qt=e=>{let{orderAddress:t}=e;const{profit:s}=Ue(t);return(0,c.jsx)(l.Typography.Text,{style:{color:s>=0?"#14E041":"#F9575E"},children:n.util.numeric(s).format("0,0.[00]%")})},Qt=[{title:"TIME",dataIndex:"createAt",key:"createAt",render:e=>(0,c.jsx)(l.Typography.Text,{children:q()(1e3*Number(e)).format(le)})},{title:"PAY",dataIndex:"orderAddress",key:"orderAddress",render:e=>(0,c.jsx)(ze,{orderAddress:e})},{title:"BUY-BACK",dataIndex:"orderAddress",key:"orderAddress",render:e=>(0,c.jsx)(Pe,{orderAddress:e})},{title:"LOCK TIME",dataIndex:"lockTime",key:"lockTime",render:e=>(0,c.jsxs)(l.Typography.Text,{children:[e.div(new(P())(de)).toString()," days"]})},{title:"PROFIT",key:"orderAddress",dataIndex:"orderAddress",render:e=>(0,c.jsx)(qt,{orderAddress:e})},{title:"STATUS",key:"state",dataIndex:"state",render:e=>(0,c.jsx)(Qe,{state:e})}],Ht=e=>{let{dataSource:t,setOrders:s}=e;return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,style:{paddingLeft:24,paddingRight:24},children:(0,c.jsx)(Me,{onChange:s})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Table,{columns:Qt,dataSource:t,pagination:!1,rowKey:e=>e.orderAddress,scroll:{x:780},expandRowByClick:!0,expandable:{expandedRowRender:e=>(0,c.jsx)(Vt,{orderAddress:e.orderAddress})}})})]})},Ut=e=>{let{orderAddress:t}=e;const{askAmount:s,bidAmount:o,retailer:a,state:i}=(0,r.useSelector)((e=>e.orders[t])),d=a.toBase58()||"",{askMint:u,bidMint:x}=(0,r.useSelector)((e=>e.boosters[d])),{profit:p}=Ue(t);return(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(Ee,{amount:o,mintAddress:x.toBase58()}),(0,c.jsx)(h.default,{name:"arrow-down-outline"}),(0,c.jsx)(Ee,{amount:s,mintAddress:u.toBase58()})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{align:"end",size:12,direction:"vertical",children:[(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(Dt,{orderAddress:t}),(0,c.jsx)(Ft,{orderAddress:t})]}),(0,c.jsx)(Qe,{state:i})]})}),(0,c.jsxs)(l.Col,{span:24,children:[(0,c.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:"Profit:"})," ",(0,c.jsx)(l.Typography.Text,{style:{color:p>=0?"#14E041":"#F9575E"},children:n.util.numeric(p).format("0,0.[00]%")})]})]})},_t=e=>{let{orderAddress:t}=e;const[s,a]=(0,o.useState)({appliedNFTs:[],discount:0}),i=(0,r.useSelector)((e=>e.orders[t])),d=(0,r.useSelector)((e=>e.boosters))[i.retailer.toBase58()].askMint.toBase58()||"",u=oe(d),{nftUsedInThisBooster:h}=Lt({orderAddress:t}),x=(0,o.useCallback)((async()=>{try{const e=await m.methods.order.get(i.metadata);e&&a(e)}catch(e){(0,Ot.c)(e)}}),[i.metadata]);return(0,o.useEffect)((()=>{x()}),[x]),(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Market price",value:` 1 LP = ${n.util.numeric(u).format("0,0.[0000]")} USDC`})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Used NFT slot",value:h.toString()})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Total boost rate",value:`${s.discount}%`})})]})},Wt=e=>{let{dataSource:t,setOrders:s}=e;return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,style:{paddingLeft:24,paddingRight:24},children:(0,c.jsx)(Xe,{onChange:s})}),t.map((e=>{let{orderAddress:t,lockTime:s,createAt:r}=e;return(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Ze,{cardId:t,cardHeader:(0,c.jsx)(Ut,{orderAddress:t}),children:(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Ordered time",value:q()(1e3*r.toNumber()).format(le)})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"Lock time",value:`${s.div(new(P())(de)).toString()} days `})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(_t,{orderAddress:t})})]})})},t)}))]})};const Kt=function(){const[e,t]=(0,o.useState)([]),[s,r]=(0,o.useState)(1),{ui:{width:a}}=(0,n.useUI)(),i=a<768;return(0,c.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:"24px 0px"},children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:i?(0,c.jsx)(Wt,{dataSource:e.slice(0,10*s),setOrders:t}):(0,c.jsx)(Ht,{dataSource:e.slice(0,10*s),setOrders:t})}),(0,c.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,c.jsx)(l.Button,{onClick:()=>r(s+1),disabled:10*s>=e.length,children:"View more"})})]})})};const Zt=function(){const[e,t]=(0,o.useState)(ce.BoostList);return(0,c.jsx)(lt,{children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(bt,{tabId:e,setTabId:t})}),(0,c.jsx)(l.Col,{span:24,children:e===ce.BoostList?(0,c.jsx)(Pt,{}):(0,c.jsx)(Kt,{})})]})})};var Gt=s(65284);const Jt=e=>{let{label:t,value:s}=e;return(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:t}),(0,c.jsx)(l.Col,{span:24,children:s})]})},Yt={dark:{padding:"4px 12px",height:40,width:"100%",background:"#232324",border:"1px solid #373947"},light:{padding:"4px 12px",height:40,width:"100%",background:"#EBEDED",border:"none"}},Xt=e=>{let{onChange:t,generateData:s}=e;const[r,a]=(0,o.useState)(!0),{askMint:i,bidMint:u,budget:x,endTime:p,startTime:j}=s,{ui:{theme:y}}=(0,n.useUI)(),{balance:m}=te(u);return(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:5,children:"General information"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:12,className:"retailer-mint-selection",children:(0,c.jsx)(Jt,{label:(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{children:"Pay"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Text,{type:"secondary",children:["Available: ",n.util.numeric(m).format("0,0.[000]")]})})]}),value:(0,c.jsx)(d.MintSelection,{value:u,onChange:e=>t(e,"bidMint"),placeholder:"Select a token",style:{...Yt[y],textAlign:"left"}})})}),(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(Jt,{label:(0,c.jsxs)(l.Space,{align:"center",children:[(0,c.jsx)(l.Typography.Text,{children:"Budget"}),(0,c.jsx)(l.Tooltip,{title:"You can set a budget to encourage users to buy the token, but it won't affect the balance of your assets.",children:(0,c.jsx)(h.default,{style:{cursor:"pointer"},name:"information-circle-outline"})})]}),value:(0,c.jsx)(l.InputNumber,{onChange:e=>t(e,"budget"),value:x||void 0,placeholder:"Amount of paid token",size:"large"})})}),(0,c.jsx)(l.Col,{span:24,className:"retailer-mint-selection",children:(0,c.jsx)(Jt,{label:"Buy-back",value:(0,c.jsx)(d.MintSelection,{value:i,onChange:e=>t(e,"askMint"),placeholder:"Select LP",style:{...Yt[y],textAlign:"left"}})})}),(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(Jt,{label:"Start time",value:(0,c.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,c.jsx)(h.default,{name:"time-outline"}),className:"date-option",onChange:e=>t((null===e||void 0===e?void 0:e.valueOf())||0,"startTime"),clearIcon:null,value:j?q()(j):null,showTime:{showSecond:!1},placement:"bottomRight",format:le,disabled:r})})}),(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(Jt,{label:"End time",value:(0,c.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,c.jsx)(h.default,{name:"time-outline"}),className:"date-option",onChange:e=>t((null===e||void 0===e?void 0:e.valueOf())||0,"endTime"),clearIcon:null,value:p?q()(p):null,showTime:{showSecond:!1},placement:"bottomRight",format:le,disabled:r})})})]})}),(0,c.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Text,{children:"No time limit"}),(0,c.jsx)(l.Switch,{checked:r,size:"small",onChange:e=>(e&&(t(0,"startTime"),t(0,"endTime")),a(e))})]})})]})},$t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYBAMAAABoWJ9DAAAAJFBMVEXT09b09PXY2Nvy8vPw8PHk5Obc3N7u7u/f3+Lp6erV1djh4eMzT5hbAAAGBUlEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD24EAAAAAAAMj/tRFUVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVXYt3vdpqEwjOMvhnwQFh6chrC5aqSKrc5SiamJhOjYCNShUwMUqWJpYYIpkbiAgriJbhVXiD/kYwmKhPO8SMh6flOHOoP/sc+xz4mIiIiIiIiIiIiQ3n9P0Vj86YfJvzB4hQ0dJib+XmJjz03c7YIwN3HWT0GIT018rUEZm7jqgrQy8bQD0tTE0wyZ+DixxqLz4tjHJo46RY8T4mAcmfiZIDOnjn5m4jvHGia2oWgGYMvEdwh5xE0JhiZuInIQ6CCjZ0M/D8hv+CAFcGPi5T6AJ0ZYALgy8dIDMDLCEsCBiZe7xZhO2AawZ+LlDoCH/AeIgrRUo/N59hH7xwpC8A3yBblDBSF4BtlFaa4gBL8g/TQs2ioIjw+yRGWsIDQ+SJSiEicKwuKD3EPtQkFYfJA1amMFYfFBZsXKuz1FZqggJD5It5rwTpA5VRAOH6SDTFIN7kcKwuGD9MK6yQLAhYJw+CD1a/olgD0FIfBBwv+FvxSkoiAt1+SWNbLctm5ZBNdBfctyXwFcKQiPn/bGxbQXmvb+Sg+GLdbo1Qm+2VmqVye30cvFtvrr89lD7UBBfqMFqpYK57PBPWukJVweH6QbNjmsFITHB7EJSh+0DehW2ijXStpK+p/5w/mM3r3WZmuCd5DzFNhfKQjBNchb5IY3CkJwDHKN0jBREB4fJJoBpbmC8PggE1TiREFYfJBuimCqICw+yBq1OFEQDh+kg8KLS+SmCsLhgyyQO7FoUV4iCsLgg1wjNw4LIFMFIfBBBpf1rwh3yktEQQh0kEl4/giXiIIQ2CDRLDyh15eIghDIIG+Q+2y5cIkoCIEL0v/J3h2zOBEGcRgfgwl6VkMSL3aRLDZWETxsL2Bhl6Boe4298ROc4BfwQIWrAiK21+jnM7nlZkKKd9nNTPf8SuEaH/68u+56qztPNrLjEyFIQWqQlf/W1/2JEKQgM0hfd8ZyxyZCkIK8ICff7Fe5H0yEIAV5Qf7ozpkYnwhBCrKC+CVvzf7wcCLP/r6fEsSkBfF7wn2VTWT/e1WjK4KYhCD+GOR0I1KcyMlbvXVFEBMfxB+DXIuUJ1JpbXRBEJMRxC95ixPxd+DHBDEJQfyesDyRmZolQUx4EH8MUphIPRBzOiWIiQ7ij0HKE5npngVBTHAQv+QtTMQGMvz+Qet+BDGxQfyesDyR+r795u5d0zFBTGwQewxSnkhvblNZ686SIJIRZGKPQcoT2fuHrb7W5zpBEoL4ZWx5Iq9sIHaZvCCIZAUZy4Hy676DeX2uEyQryKVI00RsIN5oTJCkIGdSVB0MxM91giQE8Uve8kR8IH6uPyVIRpCFNKgOBmLn+jlBEoKcbqTB4GAgdq4rQRKCXEsTvwdxFUHi3Ste8pZfP+mtCWJCgyxbDcT1CSIZQSYtB+JWBAlm93XtBuLnOkHygzQPxFUEyQjSfiB+rhMkP0jzQFyfIAlB2g/ErQiSFqQ8EF62DhAQxAZCkGb5QXwg/HeEAAFBbCAESeffluo6EP++C6LcV9XH3Qbi3yz+JIjyUFXHXQfiH9xBlEeqOtx0Goh/V+RGEGWgW8uOA/EvgCLMuf2FtxyIn+kjQZyVvXPSciD+NspEEOeXbi26DqSqfxpx+rqz7DaQ3/P6hxForVujH9P2A+l9nCtHSLiZHumFINIDPdKFINQX7Y5rrASDuR5heCkIVukRPgvCvdPOXgri9b5qR683ggzPf861teGbfwIAAAAAAAAAAAAAAADgP3twIAAAAAAA5P/aCKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqSntwSAAAAAAg6P9rR1gBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHgC038YY/Hk3xgAAAAASUVORK5CYII=",es=e=>{let{mintAddress:t,onDelete:s}=e;const{nftInfo:r,loading:n}=K(t);return(0,c.jsxs)(l.Card,{bordered:!1,bodyStyle:{padding:10},loading:n,className:"card-nft-image-only",children:[(0,c.jsx)(l.Image,{src:(null===r||void 0===r?void 0:r.image)||$t,preview:!1,style:{borderRadius:4},width:88,height:88,className:"nft-image"}),(0,c.jsx)(h.default,{onClick:()=>s(t),className:"icon-delete-nft",name:"trash-outline"})]})};var ts=s(87408);const ss=e=>{let{onSearch:t,loading:s=!1}=e;return(0,c.jsx)(l.Input,{prefix:(0,c.jsx)(l.Button,{type:"text",size:"small",icon:s?(0,c.jsx)(l.Spin,{indicator:(0,c.jsx)(ts.Z,{style:{fontSize:14}})}):(0,c.jsx)(h.default,{name:"search-outline"})}),placeholder:"Search by collection address",style:{width:"100%"},onChange:e=>t(e.target.value)})},rs=e=>{let{mintAddress:t,onSelect:s}=e;const{ui:{width:r}}=(0,n.useUI)(),a=(0,o.useMemo)((()=>r<768?150:198),[r]),{nftInfo:i,loading:d}=K(t);return(0,c.jsx)(l.Card,{bordered:!1,style:{cursor:"pointer",textAlign:"center"},bodyStyle:{padding:"15px 0 10px 0"},loading:d,onClick:()=>s(t),children:(0,c.jsxs)(l.Row,{children:[(0,c.jsx)(l.Col,{span:24,style:{textAlign:"center",width:a},children:(0,c.jsx)(l.Image,{src:(null===i||void 0===i?void 0:i.image)||$t,preview:!1,style:{borderRadius:4},width:a,height:a})}),(0,c.jsx)(l.Col,{span:24,style:{textAlign:"center",paddingTop:"8px"},children:(0,c.jsx)(l.Typography.Text,{children:null===i||void 0===i?void 0:i.name})})]})})},{sol:{metaplexNFT:ns}}=R,os=e=>{let{onSelect:t}=e;const[s,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)([]),[d,u]=(0,o.useState)(""),[x,p]=(0,o.useState)(!1),j=(0,n.useWalletAddress)(),{nfts:y}=Y(j),m=(0,o.useCallback)((async()=>{let e=[];if(!g.account.isAddress(d))return e;let t=await ns.getNftMetadata(d);return t.data?e.push(t.data.mint):e=[],e}),[d]),b=e=>{t(e),f()},f=()=>{u(""),r(!1)},A=(0,o.useCallback)((async()=>{p(!0);let e=[];try{if(d.length>0)e=await m();else{if(!y)return;for(const{collection:t}of y){const s=null===t||void 0===t?void 0:t.key;s&&(e.includes(s)||e.push(s))}}}catch(t){return window.notify({type:"error",description:t.message})}finally{p(!1)}return i(e)}),[m,y,d.length]);return(0,o.useEffect)((()=>{A()}),[A]),(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(l.Button,{onClick:()=>r(!0),size:"large",type:"dashed",className:"btn-nft",children:(0,c.jsxs)(l.Row,{gutter:[8,8],justify:"center",children:[(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(h.default,{style:{fontSize:24},name:"add-outline"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Typography.Text,{children:["Add NFT ",(0,c.jsx)("br",{})," collections"]})})]})}),(0,c.jsx)(l.Modal,{className:"modal-nft-selection",visible:s,footer:!1,onCancel:f,closeIcon:(0,c.jsx)(h.default,{name:"close-outline"}),children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:4,children:"Select a NFT collection"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ss,{loading:x,searchText:d,onSearch:e=>u(e)})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Row,{gutter:[24,24],className:"scrollbar",style:{height:500},children:a.length>0?a.map((e=>(0,c.jsx)(l.Col,{xs:12,md:12,children:(0,c.jsx)(rs,{mintAddress:e,onSelect:b})},e))):(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Empty,{})})})})]})})]})},as=()=>(0,c.jsxs)(l.Typography.Text,{style:{color:"#E9E9EB"},children:["Enable ",(0,c.jsx)("span",{style:{color:"#0FB5B8"},children:"Boost"})," means that you allow an additional rate of payment when users use NFTs. ",(0,c.jsx)("br",{})," There are 3 slots in all to use NFTs, with each slot used will increase the payout rate by 2.5%."]}),ls=e=>{let{collections:t,onChange:s}=e;const[r,n]=(0,o.useState)(!1),a=e=>{const r=[...t],n=r.findIndex((t=>e===t));return-1!==n&&r.splice(n,1),s(r)};return(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Title,{level:5,children:"Boost by NFT"}),(0,c.jsx)(l.Tooltip,{placement:"bottomRight",title:(0,c.jsx)(as,{}),children:(0,c.jsx)(h.default,{name:"information-circle-outline"})})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Switch,{size:"small",onChange:e=>{e||s([]),n(e)}})}),r&&(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{size:12,children:[t.map((e=>(0,c.jsx)(es,{onDelete:a,mintAddress:e},e))),(0,c.jsx)(os,{onSelect:e=>{const r=[...t];return t.includes(e)||r.push(e),s(r)}})]})})]})},is=["No lock time","30 days","60 days","90 days","120 days","365 days"],ds=e=>{let{payRate:t,setPayRate:s}=e;return(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Title,{level:5,children:"Pay rate"}),(0,c.jsx)(l.Tooltip,{title:"The min pay rate is 100% and equal to the market price. You need to input a higher rate to attract users You can leave blank the lock time you don't want to use, but there must be at least one field.",children:(0,c.jsx)(h.default,{style:{cursor:"pointer"},name:"information-circle-outline"})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Row,{gutter:[16,16],children:is.map((e=>(0,c.jsx)(l.Col,{className:"pay-rate",span:12,children:(0,c.jsx)(Jt,{label:e,value:(0,c.jsx)(l.InputNumber,{className:"retailer-input",size:"large",placeholder:"Must be >= 100%",value:t[e],onChange:t=>s(t,e)})})},e)))})})]})},cs=e=>{let{visible:t,setVisible:s}=e;const{pushHistory:r}=ct();return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(l.Button,{size:"large",block:!0,onClick:()=>s(!0),children:"Cancel"}),(0,c.jsx)(l.Modal,{visible:t,closeIcon:(0,c.jsx)(h.default,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,c.jsxs)(l.Row,{gutter:[32,32],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,c.jsx)(h.default,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,c.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,c.jsx)(l.Typography.Text,{children:"Are you sure you want to cancel?"}),(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Your data will not be saved."})]})]})}),(0,c.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Button,{onClick:()=>s(!1),type:"ghost",children:"No"}),(0,c.jsx)(l.Button,{onClick:()=>r("/retailer"),type:"primary",children:"Yes"})]})})]})})]})},us=()=>{const[e,t]=(0,o.useState)({}),[s,r]=(0,o.useState)([]),[n,a]=(0,Gt.Z)({bidMint:"",askMint:"",budget:0,startTime:0,endTime:0}),[i,d]=(0,o.useState)(!1),{initializeBooster:u,loading:h}=(()=>{const{senExchange:e}=ne(),[t,s]=(0,o.useState)(!1),r=(0,o.useCallback)((async t=>{let{bidMint:r,askMint:n,startTime:o,endTime:a,budget:l,collections:i,payRate:d}=t;try{s(!0);const t={payRate:d,budget:l},{digest:c}=await m.methods.booster.set(t),u=o?o-Date.now():o,h=a?a-Date.now():a,{provider:x}=e,j=new C.web3.Transaction,y=C.web3.Keypair.generate(),g=[y],{tx:b}=await e.initializeRetailer({bidMint:r,askMint:n,askTotal:new(P())(0),bidTotal:new(P())(0),startAfter:new(P())(u/1e3),endAfter:new(P())(h/1e3),metadata:c,sendAndConfirm:!1,retailer:y});j.add(b);for(const s of i){const t=C.web3.Keypair.generate(),{tx:r}=await e.initializeVoucherPrinter({collection:s,discount:p.utilsBN.decimalize(.025,9),retailer:y.publicKey,total:new(P())(1e9),voucherPrinter:t,sendAndConfirm:!1});g.push(t),j.add(r)}const f=await x.sendAndConfirm(j,g);return I("Add new Booster",f)}catch(c){return M(c)}finally{s(!1)}}),[e]);return{initializeBooster:r,loading:t}})(),{pushHistory:x}=ct(),j=(0,o.useMemo)((()=>{const{askMint:t,bidMint:s,budget:r}=n,o=Object.keys(e);return!t||!s||!r||o.length<1}),[e,n]);return(0,c.jsx)(l.Row,{justify:"center",children:(0,c.jsx)(l.Col,{xs:24,md:16,lg:10,children:(0,c.jsx)(l.Card,{children:(0,c.jsxs)(l.Row,{gutter:[32,32],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:4,children:"Create booster"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Xt,{generateData:n,onChange:(e,t)=>a(Object.assign(n,{[t]:e}))})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ds,{payRate:e,setPayRate:(s,r)=>{const n={...e};return n[r]=Number(s),t(n)}})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ls,{collections:s,onChange:r})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(cs,{visible:i,setVisible:d})}),(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(l.Button,{size:"large",block:!0,onClick:async()=>{const t={...e};for(const e of is)t[e]||(t[e]=0);return await u({...n,payRate:t,collections:s}),x("/retailer")},loading:h,disabled:j,type:"primary",children:"Create"})})]})})]})})})})},hs="boosters",xs=(0,ut.createAsyncThunk)("boosters/initBoosters",(async e=>e)),ps=(0,ut.createAsyncThunk)("boosters/upsetBooster",(async e=>{let{address:t,data:s}=e;if(!g.account.isAddress(t))throw new Error("Invalid booster address");if(!s)throw new Error("Data is empty");return{[t]:s}})),js=(0,ut.createSlice)({name:hs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(xs.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(ps.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var ys=s(44994);const ms={},gs=(0,ys.r)({}),bs=e=>{const{program:t,name:s,filter:r,upset:n,init:a}=e,[l,i]=(0,o.useState)(0),[d,u]=gs(),{accountClient:h,connection:x}=(0,o.useMemo)((()=>{var e;const r=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[s];return{accountClient:r,connection:r.provider.connection}}),[s,null===t||void 0===t?void 0:t.account]),j=(0,o.useCallback)((async()=>{if(void 0===ms[s])try{ms[s]=!0,u({...ms,[s]:!0});const e=await h.all(),t={};for(const s of e)t[s.publicKey.toBase58()]=s.account;a(t)}catch(e){M(e)}finally{u({...d,[s]:!1})}}),[h,a,d,s,u]),y=(0,o.useCallback)((async()=>{if(l)return;const e=x.onProgramAccountChange(h.programId,(async e=>{const r=e.accountId.toBase58(),o=e.accountInfo.data,a=t.coder.accounts.decode(s,o);n(r,a)}),"confirmed",[{dataSize:h.size},{memcmp:{offset:0,bytes:(0,p.encodeIxData)((0,p.accountDiscriminator)(s))}},...r]);i(e)}),[h.programId,h.size,x,r,s,t.coder.accounts,n,l]);return(0,o.useEffect)((()=>{j()}),[j]),(0,o.useEffect)((()=>(y(),()=>{(async()=>{l&&(await x.removeProgramAccountChangeListener(l),i(0))})()})),[x,y,l]),(0,c.jsx)(o.Fragment,{})},fs=[],As=()=>{const e=(0,r.useDispatch)(),t=(0,o.useCallback)((t=>e(xs(t))),[e]),s=(0,o.useCallback)(((t,s)=>e(ps({address:t,data:s}))),[e]);return(0,c.jsx)(bs,{program:window.senBooster.program,name:"retailer",filter:fs,init:t,upset:s})},Cs="orders",ws=(0,ut.createAsyncThunk)("orders/initOrders",(async e=>e)),Ts=(0,ut.createAsyncThunk)("orders/upsetOrder",(async e=>{let{address:t,data:s}=e;if(!g.account.isAddress(t))throw new Error("Invalid order address");if(!s)throw new Error("Data is empty");return{[t]:s}})),vs=(0,ut.createSlice)({name:Cs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(ws.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Ts.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ks=[],Ss=()=>{const e=(0,r.useDispatch)(),t=(0,o.useCallback)((t=>e(ws(t))),[e]),s=(0,o.useCallback)(((t,s)=>e(Ts({address:t,data:s}))),[e]);return(0,c.jsx)(bs,{program:window.senBooster.program,name:"order",filter:ks,init:t,upset:s})},Bs="voucher",Rs=(0,ut.createAsyncThunk)("voucher/initVouchers",(async e=>e)),Ns=(0,ut.createAsyncThunk)("voucher/upsetVoucher",(async e=>{let{address:t,data:s}=e;return{[t]:s}})),Is=(0,ut.createSlice)({name:Bs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Rs.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Ns.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Ms=[],Es=()=>{const e=(0,r.useDispatch)(),t=(0,o.useCallback)((t=>e(Rs(t))),[e]),s=(0,o.useCallback)(((t,s)=>e(Ns({address:t,data:s}))),[e]);return(0,c.jsx)(bs,{program:window.senBooster.program,name:"voucher",filter:Ms,init:t,upset:s})},zs="voucherPrinter",Ps=(0,ut.createAsyncThunk)("voucherPrinter/initVoucherPrinters",(async e=>e)),Os=(0,ut.createAsyncThunk)("voucherPrinter/upsetVoucherPrinters",(async e=>{let{address:t,data:s}=e;return{[t]:s}})),Fs=(0,ut.createSlice)({name:zs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ps.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Os.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Ds=[],Ls=()=>{const e=(0,r.useDispatch)(),t=(0,o.useCallback)((t=>e(Ps(t))),[e]),s=(0,o.useCallback)(((t,s)=>e(Os({address:t,data:s}))),[e]);return(0,c.jsx)(bs,{program:window.senBooster.program,name:"voucherPrinter",filter:Ds,init:t,upset:s})},Vs=()=>(0,c.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,style:{height:256}}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Row,{gutter:[24,24],justify:"center",children:(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",align:"center",size:32,children:[(0,c.jsx)(l.Spin,{size:"large"}),(0,c.jsx)(l.Typography.Title,{level:5,children:"Welcome to Sen Booster. The application is loading..."})]})})})})]})}),qs=e=>{let{children:t}=e;const[s]=gs(),r=(0,o.useMemo)((()=>!Object.values(s).length||Object.values(s).includes(!0)),[s]);return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(As,{}),(0,c.jsx)(Ss,{}),(0,c.jsx)(Ls,{}),(0,c.jsx)(Es,{}),r?(0,c.jsx)(Vs,{}):t]})},{manifest:{appId:Qs},sol:{senExchangeProgram:Hs}}=R,Us=e=>{let{children:t}=e;const s=(0,n.useWalletAddress)(),[a,l]=(0,o.useState)(!1),i=(0,r.useDispatch)(),{pushHistory:d}=ct(),u=(0,o.useCallback)((async()=>{const e=new n.PDB(s).createInstance(Qs),t=await e.getItem("mode")||ue.User;return i(pt(t)),d(`/${t}`)}),[s,i,d]);return(0,o.useEffect)((()=>{if(a)return;const e=(0,p.getAnchorProvider)(n.rpc,s,window.sentre.wallet),t=new(re())(e,Hs);window.senBooster=t,u(),l(!0)}),[s,a,u]),a?(0,c.jsx)(o.Fragment,{children:t}):null},_s=s.p+"static/media/BG_DARK.df604c27560167cd6308.png",Ws=s.p+"static/media/BG_LIGHT.c5d0b6b56b55e2b94820.png",Ks=()=>{const{setBackground:e}=(0,n.useUI)(),{appRoute:t}=ct();return(0,o.useEffect)((()=>{e({light:Ws,dark:_s})}),[e]),(0,c.jsx)(Us,{children:(0,c.jsx)(qs,{children:(0,c.jsxs)(a.Switch,{children:[(0,c.jsx)(a.Route,{path:`${t}/user`,component:ft}),(0,c.jsx)(a.Route,{path:`${t}/retailer`,component:Zt}),(0,c.jsx)(a.Route,{path:`${t}/create-booster`,component:us}),(0,c.jsx)(a.Route,{path:"*",children:(0,c.jsx)(a.Redirect,{to:`${t}/user`})})]})})})};var Zs=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Gs={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof C.web3.PublicKey||e instanceof P()||Zs.isBuffer(e)}},Js=(0,ut.configureStore)({middleware:e=>e(Gs),devTools:!1,reducer:{boosters:js,orders:vs,voucherPrinters:Fs,settings:jt,vouchers:Is}});var Ys=s(45597);const{manifest:{appId:Xs}}=R,$s=()=>(0,c.jsx)(n.UIProvider,{appId:Xs,antd:{prefixCls:Xs},style:{paddingBottom:24},children:(0,c.jsx)(n.WalletProvider,{children:(0,c.jsx)(n.AccountProvider,{children:(0,c.jsx)(n.PoolProvider,{children:(0,c.jsx)(n.MintProvider,{children:(0,c.jsx)(r.Provider,{store:Js,children:(0,c.jsx)(Ks,{})})})})})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.118bc629645ae59e5bd2.md"},57919:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel_1.c13975bee735c8fd9827.png"},96917:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel_2.95d50fb7aee8d9cb3819.png"},43094:()=>{},69159:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},89408:()=>{},47956:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-83caa4.30c7d54b.chunk.js.map