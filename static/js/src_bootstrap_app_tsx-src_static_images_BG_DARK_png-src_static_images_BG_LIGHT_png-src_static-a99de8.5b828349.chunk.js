(globalThis.webpackChunksen_booster=globalThis.webpackChunksen_booster||[]).push([["src_bootstrap_app_tsx-src_static_images_BG_DARK_png-src_static_images_BG_LIGHT_png-src_static-a99de8"],{45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return n.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return a.default}});var r=o(s(70854)),n=o(s(69363)),a=o(s(83272));function o(e){return e&&e.__esModule?e:{default:e}}const A=[r.default];t.h0=A},84167:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>Ns,__esModule:()=>Rs.X$,logo:()=>Rs.jY,panels:()=>Rs.h0,readme:()=>Rs.ng});var r=s(55754),n=s(70210),a=s(92950),o=s(45055),A=s(94751),l=s(69716);let i,c,d;!function(e){e.Booster="booster",e.Redeem="redeem",e.BoostList="boost-list",e.OrderList="order-list"}(i||(i={})),function(e){e.User="user",e.Retailer="retailer"}(c||(c={})),function(e){e.AllBooster="All booster",e.HotBooster="Hot booster",e.HighBuyBackRate="High buy-back rate",e.BoostOnly="Boost only"}(d||(d={}));const u=Object.entries(d).map((e=>{let[t,s]=e;return s}));let h;!function(e){e.AvailableBooster="Available booster",e.BoostOnly="Boost only",e.ExpiredBooster="Expired booster"}(h||(h={}));const x={"7 days":7,"30 days":30,"60 days":60,"90 days":90,"120 days":120,"365 days":365},p="MMM DD, YYYY HH:mm",g="all",j=[{key:"Past 7 days",value:7},{key:"Past 30 days",value:30}],y=[{key:"All",value:g},{key:"Pending",value:"pending"},{key:"Approved",value:"approved"},{key:"Reject",value:"reject"},{key:"Done",value:"done"}];const m={appId:"sen_booster",url:"https://descartesnetwork.github.io/sen-booster/index.js"},C={development:{...m},staging:{...m},production:{...m}};var B=s(38073),b=s(33804);const f=e=>{if(!e)return!1;try{if(!new b.web3.PublicKey(e))throw new Error("Invalid public key");return!0}catch(t){return!1}},{metadata:{Metadata:w,MetadataData:I}}=B.programs,E=new b.web3.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");const T=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"devnet";this._connection=void 0,this.findDataByOwnerGroupByCollection=async e=>{if(!f(e))throw new Error("Invalid address!");const t=await w.findDataByOwner(this._connection,e);let s={};return t.forEach((e=>{e.collection&&(s[e.collection.key]=s[e.collection.key]?[...s[e.collection.key],e]:[e])})),s},this.findDataByOwner=async e=>{if(!f(e))throw new Error("Invalid address!");return await w.findDataByOwner(this._connection,e)},this.getNftMetadata=async e=>{if(!f(e))throw new Error("Invalid address!");return await w.findByMint(this._connection,e)},this.getListAccountNFTsBelongToCollection=async e=>await this._connection.getProgramAccounts(E,{commitment:"confirmed",filters:[{dataSize:679},{memcmp:{offset:368,bytes:e}}]}),this.isNftBelongsToCollection=async(e,t)=>{var s;return(null===(s=(await w.findByMint(this._connection,e)).data.collection)||void 0===s?void 0:s.key)===t},this._connection=new B.Connection(e)}},v={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",metaplexNFT:new T(n.rpc),senExchangeProgram:"3GXMn8DXgNeUVtBrFfrWEDHRQ6JEgKtptWf6Bqzmo4w4"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",metaplexNFT:new T(n.rpc),senExchangeProgram:"3GXMn8DXgNeUVtBrFfrWEDHRQ6JEgKtptWf6Bqzmo4w4"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",metaplexNFT:new T(n.rpc),senExchangeProgram:"3GXMn8DXgNeUVtBrFfrWEDHRQ6JEgKtptWf6Bqzmo4w4"}},S={manifest:C[n.env],sol:v[n.net]},{manifest:{appId:k}}=S,Q=`/app/${k}`,R=()=>{const{search:e,pathname:t}=(0,o.useLocation)(),s=(0,o.useHistory)(),r=(0,a.useMemo)((()=>new URLSearchParams(e)),[e]),n=(0,a.useCallback)((e=>r.get(e)),[r]),A=(0,a.useCallback)((()=>{const e={};r.forEach(((t,s)=>{e[s]=t}));return e}),[r]),l=(0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=A();!1===r&&(t=Object.assign(n,t));const a=new URLSearchParams(t);a&&(e+=`?${a.toString()}`),s.push(`${Q}${e}`)}),[A,s]);return{getQuery:n,getAllQuery:A,pushHistory:l,appRoute:Q,pathname:t}};var M=s(19289);const N="orderFilter",D={token:"",time:"",status:""},P=(0,M.createAsyncThunk)(`${N}/setTokenFilter`,(async e=>({token:e}))),z=(0,M.createAsyncThunk)(`${N}/setTimeFilter`,(async e=>({time:e}))),G=(0,M.createAsyncThunk)(`${N}/setStatusFilter`,(async e=>({status:e}))),O=(0,M.createAsyncThunk)(`${N}/resetFilter`,(async()=>D)),Y=(0,M.createSlice)({name:N,initialState:D,reducers:{},extraReducers:e=>{e.addCase(P.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(z.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(G.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(O.fulfilled,((e,t)=>{let{payload:s}=t;return s}))}}).reducer,Z="settings",F={mode:c.User},H=(0,M.createAsyncThunk)("settings/setMode",(async e=>({mode:e}))),U=(0,M.createSlice)({name:Z,initialState:F,reducers:{},extraReducers:e=>{e.addCase(H.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var L=s(45263);const W=[{label:"Booster list",value:i.BoostList},{label:"Order list",value:i.OrderList}],q=[{label:"Booster",value:i.Booster},{label:"Redeem",value:i.Redeem}],X=e=>{let{tabId:t,setTabId:s,isRetailer:n=!1}=e;const{pushHistory:i}=R(),d=(0,r.useDispatch)(),[u,h]=(0,a.useState)(!1),x=(0,o.useLocation)();(0,a.useEffect)((()=>{if(x.pathname.includes("retailer"))return h(!0);h(!1)}),[x.pathname]);return(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsx)(A.Segmented,{options:n?W:q,value:t,onChange:s,size:"large"})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{size:12,children:[!u&&(0,L.jsx)(A.Button,{icon:(0,L.jsx)(l.Z,{name:"arrow-down-outline"}),ghost:!0,children:"FAQ"}),(0,L.jsx)(A.Popover,{placement:"topRight",content:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Typography.Text,{children:"Retailer mode"}),(0,L.jsx)(A.Switch,{size:"small",checked:u,onChange:e=>{if(d(O()),e)return d(H(c.Retailer)),i("/retailer");d(H(c.Retailer)),i("/user")}})]}),trigger:"click",overlayClassName:"slippage",children:(0,L.jsx)(A.Button,{ghost:!0,icon:(0,L.jsx)(l.Z,{name:"cog-outline"})})})]})})]})};var V=s(43738);const K=e=>{let{boosterAddress:t}=e;const{bidMint:s,askMint:n}=(0,r.useSelector)((e=>e.boosters[t]));return(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(V.Z,{mintAddress:s,separator:"."}),"-",(0,L.jsx)(V.Z,{mintAddress:n,separator:"."})]})};var J=s(1468);const _=e=>{let{boosterAddress:t}=e;const{bidMint:s,askMint:n}=(0,r.useSelector)((e=>e.boosters[t]));return(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(J.Z,{mintAddress:s.toBase58()}),(0,L.jsx)(l.Z,{name:"arrow-forward-outline"}),(0,L.jsx)(J.Z,{mintAddress:n.toBase58()})]})};var $=s(4065),ee=s(95414);const te=e=>{const[t,s]=(0,a.useState)(void 0),{getDecimals:r}=(0,n.useMint)(),o=(0,a.useCallback)((async()=>{try{const t=await r(e);return s(t)}catch(t){return s(void 0)}}),[e,r]);return(0,a.useEffect)((()=>{o()}),[o]),t};var se=s(95418);const{sol:{metaplexNFT:re}}=S,ne=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(n.util.explorer(t),"_blank")}),ae=e=>window.notify({type:"error",description:e.message}),oe=new $.IPFS("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDU4M0Q5MmIwMGJlNjZDNjg2NDUyY0JkNTZEMTlmOWZlMTRhNjhCYTQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTg4MDM1NjE3MTcsIm5hbWUiOiJCb29zdGVyRGV2In0.kaP_EXFB2q7Zo8_CWZfGI1n5R-AoZzfVTWpDdZ_REcM",["booster"]),Ae=e=>{const{metadata:t}=(0,r.useSelector)((t=>t.boosters[e])),[s,n]=(0,a.useState)({budget:"",payRate:{}}),o=(0,a.useCallback)((async()=>{try{const e=await oe.methods.booster.get(t);return n(e)}catch(e){return ae(e)}}),[t]);return(0,a.useEffect)((()=>{o()}),[o]),s},le=e=>{let{boosterAddress:t}=e;const{bidReserve:s,bidMint:o,askTotal:l,askMint:i}=(0,r.useSelector)((e=>e.boosters[t])),{budget:c}=Ae(t),d=te(o.toBase58())||0,u=te(i.toBase58())||0,h=Number(c)-Number($.utilsBN.undecimalize(s,d)),x=(0,a.useMemo)((()=>{if("0"===c)return 0;const e=$.utilsBN.undecimalize(l,u);return Number(e)/Number(c)}),[u,l,c]);return(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{justify:"space-between",children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsxs)(A.Space,{direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{type:"secondary",children:"Process"}),(0,L.jsxs)(A.Typography.Text,{children:[(0,ee.numeric)(h).format("0.0,[0000]")," ",(0,L.jsx)(V.Z,{mintAddress:o.toBase58()}),"(",n.util.numeric(x).format("0,0.[00]%"),")"]})]})}),(0,L.jsx)(A.Col,{style:{textAlign:"right"},children:(0,L.jsxs)(A.Space,{direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{type:"secondary",children:"Budget"}),(0,L.jsxs)(A.Typography.Text,{children:[(0,ee.numeric)(c).format("0.0,[0000]")," ",(0,L.jsx)(V.Z,{mintAddress:o.toBase58()})]})]})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Progress,{strokeColor:"#0FB5B8",percent:x/100,showInfo:!1,status:"active"})})]})};var ie=s(40349),ce=s.n(ie);const de=e=>{let{boosterAddress:t}=e;const{endAt:s}=(0,r.useSelector)((e=>e.boosters[t])),n=(0,a.useMemo)((()=>1),[]),o=(0,a.useMemo)((()=>3),[]);return(0,L.jsxs)(A.Space,{size:48,children:[(0,L.jsxs)(A.Space,{direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"Buy-back"}),(0,L.jsx)(A.Typography.Title,{level:4,children:"102.5%"})]}),(0,L.jsxs)(A.Space,{direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"Your bought"}),(0,L.jsx)(A.Typography.Title,{level:5,children:n})]}),(0,L.jsxs)(A.Space,{direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"Total value paid"}),(0,L.jsx)(A.Typography.Title,{level:5,children:o})]}),(0,L.jsxs)(A.Space,{direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"End date"}),(0,L.jsx)(A.Typography.Title,{level:5,children:ce()(1e3*s.toNumber()).format("MMM DD, YYYY HH:mm")})]})]})};var ue=s(48744),he=s.n(ue);const xe=e=>{let{estimatedReceive:t,boosterAddress:s,discount:a,nftDiscount:o}=e;const{bidMint:l}=(0,r.useSelector)((e=>e.boosters[s])),i=te(l.toBase58())||0;return(0,L.jsx)(A.Card,{style:{borderRadius:8},bodyStyle:{padding:"12px 16px"},children:(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsx)(A.Typography.Text,{style:{color:"#0FB5B8"},children:"Buy-back"})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{children:[(0,L.jsxs)(A.Typography.Title,{style:{color:"#0FB5B8"},level:3,children:[a,"%"]}),!!o&&(0,L.jsxs)(A.Typography.Title,{style:{color:"#0FB5B8"},level:3,children:["+ ",o,"%"]})]})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsx)(A.Typography.Text,{children:"Market buy-back"})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(A.Typography.Text,{delete:!0,children:"100%"})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsx)(A.Typography.Text,{children:"Estimated received"})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Typography.Title,{level:5,children:[n.util.numeric($.utilsBN.undecimalize(t,i)).format("0,0.[0000]")," ",(0,L.jsx)(V.Z,{mintAddress:l})]})})]})})]})})},{sol:{metaplexNFT:pe}}=S,ge=e=>{const[t,s]=(0,a.useState)(),[r,o]=(0,a.useState)(),[A,l]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!1),d=(0,a.useCallback)((async()=>{if(!se.account.isAddress(e))return s(void 0),o(void 0);l(!0);try{const t=await n.DataLoader.load("getNftMetadata"+e,(()=>pe.getNftMetadata(e)));s(t);const r=t.data.data.uri,a=await n.DataLoader.load("getNftMetadataUrl"+e,(()=>fetch(r).then((e=>e.json()))));o(a)}catch(t){c(!0)}finally{l(!1)}}),[e]);return(0,a.useEffect)((()=>{d()}),[d]),{metadata:t,nftInfo:r,loading:A,isUnknownNFT:i}},je=e=>{let{nftAddress:t,onSelect:s,isSelected:r}=e;const{ui:{width:o}}=(0,n.useUI)(),l=(0,a.useMemo)((()=>o<768?150:198),[o]),{nftInfo:i,loading:c}=ge(t);return(0,L.jsx)(A.Card,{bordered:!1,style:{cursor:"pointer",textAlign:"center",background:"transparent"},bodyStyle:{padding:0},loading:c,onClick:()=>s(t,`${null===i||void 0===i?void 0:i.image}`),children:(0,L.jsxs)(A.Row,{gutter:[8,8],justify:"center",children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Image,{src:(null===i||void 0===i?void 0:i.image)||"",preview:!1,style:{borderRadius:12},width:l,height:l})}),(0,L.jsx)(A.Col,{style:{width:l},children:(0,L.jsxs)(A.Row,{justify:"space-between",gutter:[8,8],children:[(0,L.jsx)(A.Col,{flex:"auto",style:{textAlign:"start"},children:(0,L.jsx)(A.Typography.Text,{children:null===i||void 0===i?void 0:i.name})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(A.Typography.Text,{children:n.util.shortenAddress(t)})})]})})]})})},ye=e=>{const t=(0,r.useSelector)((e=>e.voucherPrinters)),[s,n]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const s=[];for(const r in t)t[r].retailer.toBase58()===e&&s.push({...t[r]});return n(s)}),[e,t]),s},{sol:{metaplexNFT:me}}=S,Ce=e=>{const[t,s]=(0,a.useState)(),[r,o]=(0,a.useState)(),{accounts:A}=(0,n.useAccount)(),l=(0,a.useCallback)((async()=>{if(!e)return s(void 0);const t=await n.DataLoader.load("findDataByOwner"+e,(()=>me.findDataByOwner(e)));s(t)}),[e]);(0,a.useEffect)((()=>{l()}),[l]);const i=(0,a.useCallback)((async()=>{if(!t)return o(void 0);const{splt:s}=window.sentre;let r=[];return await Promise.all(t.map((async t=>{const n=await s.deriveAssociatedAddress(e,t.mint);let a=A[n];new ue.BN(null===a||void 0===a?void 0:a.amount.toString()).eq(new ue.BN(1))&&r.push(t)}))),o(r)}),[A,t,e]);return(0,a.useEffect)((()=>{i()}),[i]),{nfts:r}},Be=e=>{let{onSelectNFT:t,boosterAddress:s,selectedNFTs:r,removeNFT:o}=e;const[i,c]=(0,a.useState)(Array(3).fill({nftAddress:"",img:""})),[d,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)(0),[p,g]=(0,a.useState)([]),j=(e=>{const[t,s]=(0,a.useState)([]),{wallet:{address:r}}=(0,n.useWallet)(),{nfts:o}=Ce(r),A=ye(e),l=(0,a.useCallback)((()=>{if(!A.length||!o)return[];const e=A.map((e=>e.collection.toBase58())),t=o.filter((t=>{let{collection:s}=t;return e.includes((null===s||void 0===s?void 0:s.key)||"")}));return s(t)}),[o,A]);return(0,a.useEffect)((()=>{l()}),[l]),t})(s),y=ye(s),m=(0,a.useMemo)((()=>j.filter((e=>!r.includes(e.mint)))),[j,r]),C=(0,a.useCallback)((async()=>{const e=await Promise.all(y.map((async e=>{const t=await(async e=>{if(se.account.isAddress(e))try{return await n.DataLoader.load("getNftMetadata"+e,(()=>re.getNftMetadata(e)))}catch(t){return}})(e.collection.toBase58());return(null===t||void 0===t?void 0:t.data.data.name)||"Unknown NFT"})));return g(e)}),[y]),B=(e,s)=>{t(e);const r=[...i];r[h]={nftAddress:e,img:s},c(r),u(!1)};return(0,a.useEffect)((()=>{C()}),[C]),(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Text,{children:"Use NFTs to increase Buy-back rate"})}),(0,L.jsx)(A.Col,{onClick:e=>e,span:24,children:(0,L.jsx)(A.Space,{children:i.map(((e,t)=>{let{img:s}=e;return(0,L.jsx)(A.Tooltip,{placement:"topLeft",title:"NFTs in the collections below will be approved for this booster",children:(0,L.jsxs)(A.Card,{className:"upload-box card-nft-image-only",onClick:()=>{x(t),u(!0)},children:[s?(0,L.jsx)(A.Image,{src:s,alt:"avatar",width:64,height:64,style:{borderRadius:8,marginTop:-1},preview:!1,className:"nft-image"}):(0,L.jsx)(l.Z,{name:"add-outline"}),s&&(0,L.jsx)(A.Button,{type:"text",className:"icon-delete-nft",onClick:e=>((e,t)=>{e.stopPropagation();const s=[...i],r=s.findIndex((e=>t===e.img));return o(s[r].nftAddress),-1!==r&&(s[r]={nftAddress:"",img:""}),c(s)})(e,s),icon:(0,L.jsx)(l.Z,{name:"trash-outline"})})]})})}))})}),(0,L.jsx)(A.Modal,{title:(0,L.jsx)(A.Typography.Title,{level:4,children:"Select a NFT"}),visible:d,closeIcon:(0,L.jsx)(l.Z,{name:"close-outline"}),onCancel:()=>u(!1),footer:null,className:"card-manage",style:{paddingBottom:0},children:(0,L.jsx)(A.Row,{gutter:[24,24],className:"scrollbar",style:{maxHeight:400},children:m.length?m.map((e=>(0,L.jsx)(A.Col,{xs:12,md:12,children:(0,L.jsx)(je,{nftAddress:e.mint,onSelect:B})},e.mint))):(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[4,4],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography,{children:"You don't have a NFT"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography,{children:"You can buy NFTs from the collections below:"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.List,{itemLayout:"horizontal",dataSource:p,renderItem:e=>(0,L.jsx)(A.List.Item,{children:(0,L.jsxs)(A.Space,{size:12,children:[(0,L.jsx)(A.Typography.Text,{style:{color:"#0fb5b8 "},children:"\u2022"}),(0,L.jsx)(A.Typography.Text,{style:{color:"#0fb5b8 "},children:e})]})})})})]})})})})]})};var be=s(67763),fe=s.n(be);const we=()=>{const{wallet:{address:e}}=(0,n.useWallet)();return(0,a.useMemo)((()=>{const t=(0,$.getAnchorProvider)(n.rpc,e,window.sentre.wallet);return{provider:t,senExchange:new(fe())(t,S.sol.senExchangeProgram)}}),[e])},Ie=(e,t)=>{const{tokenProvider:s,getMint:r,getDecimals:o}=(0,n.useMint)(),{pools:A}=(0,n.usePool)(),[l,i]=(0,a.useState)(0),c=(0,a.useCallback)((async e=>{var r;const a=await s.findByAddress(e),o=null===a||void 0===a||null===(r=a.extensions)||void 0===r?void 0:r.coingeckoId;if(!o){if(t)throw new Error("Unknown Token");return 0}const A=(await n.util.fetchCGK(o)).price;if(!A){if(t)throw new Error("Not find on Cgk");return 0}return A}),[t,s]),d=(0,a.useCallback)((async(e,t)=>{const s=await c(e),r=await o(e);return Number(se.utils.undecimalize(t,r))*s}),[o,c]),u=(0,a.useCallback)((async e=>{const t=Object.values(A).find((t=>t.mint_lpt===e));if(!t)return 0;const{reserve_a:s,reserve_b:n,mint_a:a,mint_b:o}=t;if(s*n===BigInt(0))return 0;const{[e]:{supply:l}}=await r({address:e});return(await d(a,s)+await d(o,n))/Number(se.utils.undecimalize(l,9))}),[r,d,A]),h=(0,a.useCallback)((async e=>{try{var t;const r=await s.findByAddress(e);if(!r){const t=await u(e);return i(t)}const a=null===(t=r.extensions)||void 0===t?void 0:t.coingeckoId;if(!a)return i(0);const o=await n.util.fetchCGK(a);return i(o.price)}catch(r){return 0}}),[u,s]);return(0,a.useEffect)((()=>{h(e)}),[h,e]),l},Ee=10**9,Te=(e,t,s)=>se.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(se.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},ve=e=>{const{wallet:{address:t,lamports:s}}=(0,n.useWallet)(),{accounts:r}=(0,n.useAccount)(),{amount:a,mint:o}=r[e]||{},A=te(o)||0;return se.account.isAddress(t)&&se.account.isAddress(e)?e===t?Te(se.DEFAULT_EMPTY_ADDRESS,s,9):Te(o,a,A):Te()},Se=e=>{let{boosterAddress:t}=e;const{askMint:s,bidMint:o}=(0,r.useSelector)((e=>e.boosters[t])),[i,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(0),[g,j]=(0,a.useState)("7 days"),[y,m]=(0,a.useState)([]),C=(e=>{const[t,s]=(0,a.useState)(""),{wallet:{address:r}}=(0,n.useWallet)(),o=ve(t);return(0,a.useEffect)((()=>{(async()=>{if(!se.account.isAddress(r)||!se.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const n=await t.deriveAssociatedAddress(r,e);s(n)}catch(n){return s("")}})()})),o})(s.toBase58()),B=ye(t),{payRate:f}=Ae(t),{getDecimals:w}=(0,n.useMint)(),{buy:I,loading:E}=(()=>{const e=(0,r.useSelector)((e=>e.voucherPrinters)),{senExchange:t}=we(),[s,n]=(0,a.useState)(!1),o=(0,a.useCallback)(((t,s)=>{const r=[],n=Object.keys(e).sort(((t,s)=>e[s].discount.gt(e[t].discount)?1:-1));for(const a of n){const n=e[a];let o=n.total.toNumber();if(n.retailer.toBase58()===t.toString())for(;o>0||r.length<s;)r.push(a),o-=1}if(r.length<s)throw new Error("Insufficient voucher");return r}),[e]),A=(0,a.useCallback)((async e=>{let{retailer:s,bidAmount:r,askAmount:a,lockTime:A,appliedNFTs:l}=e;try{n(!0);const{provider:e}=t,i=new b.web3.Transaction,c=b.web3.Keypair.generate(),d=[c],{tx:u}=await t.initializeOrder({retailer:s,bidAmount:r,askAmount:a,lockTime:A,sendAndConfirm:!1,order:c});i.add(u);const h=o(s,l.length);await Promise.all(l.map((async(e,s)=>{const r=b.web3.Keypair.generate(),{tx:n}=await t.lockVoucher({order:c.publicKey,voucherPrinter:h[s],mintNft:e,voucher:r,sendAndConfirm:!1});d.push(r),i.add(n)})));const x=await e.sendAndConfirm(i,d);ne("Initialize Order",x)}catch(i){ae(i)}finally{n(!1)}}),[o,t]);return{buy:A,loading:s}})(),T=2.5*y.length,v=(e=>{let{boosterAddress:t,amount:s,discount:n}=e;const{bidMint:o,askMint:A}=(0,r.useSelector)((e=>e.boosters[t])),l=Ie(o.toBase58()),i=Ie(A.toBase58()),c=te(o.toBase58())||0,d=te(A.toBase58())||0;return(0,a.useMemo)((()=>{const e=$.utilsBN.decimalize(l,c),t=$.utilsBN.decimalize(i,d),r=$.utilsBN.decimalize(s,d).mul(t);return l?r.mul(new(he())(n/100*Ee)).div(e):new(he())(0)}),[s,d,i,c,l,n]).div(new(he())(Ee))})({boosterAddress:t,amount:h,discount:f[g]+T});return(0,L.jsxs)(a.Fragment,{children:[(0,L.jsx)(A.Button,{size:"large",type:"primary",onClick:()=>c(!0),children:"Buy Now"}),(0,L.jsx)(A.Modal,{visible:i,closeIcon:(0,L.jsx)(l.Z,{name:"close-outline"}),onCancel:()=>c(!1),footer:null,className:"card-manage",title:(0,L.jsx)(A.Typography.Title,{level:4,children:"Buy token"}),children:(0,L.jsxs)(A.Row,{justify:"space-between",gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Typography.Text,{children:["Token Buy-back offering:"," ",(0,L.jsx)(A.Typography.Text,{type:"secondary",children:"Selling your LP tokens with juicy profit. No fee, no slippage. The token will be unlocked after the selected period."})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsx)(A.Typography.Text,{children:"You Pay"})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Typography.Text,{type:"secondary",className:"caption",children:["Available:"," ",n.util.numeric(C.balance).format("0,0.[00]a")," ",(0,L.jsx)(V.Z,{mintAddress:s})]})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.InputNumber,{className:"user-input",placeholder:"0",prefix:(0,L.jsx)(V.Z,{mintAddress:s}),addonAfter:(0,L.jsx)(A.Button,{type:"text",style:{marginRight:-7},onClick:()=>p(Number(C.balance)),children:"MAX"}),value:h,onChange:p,max:Number(C.balance),style:{width:"100%"}})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Typography.Text,{children:"Lock time"}),(0,L.jsx)(A.Tooltip,{title:"For each lock time, there will be a corresponding Buy-back rate, you will receive tokens after the selected lock time.",children:(0,L.jsx)(l.Z,{name:"information-circle-outline"})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Radio.Group,{size:"middle",onChange:e=>j(e.target.value),style:{width:"100%"},value:g,children:(0,L.jsx)(A.Row,{gutter:[6,6],children:Object.keys(f).map((e=>(0,L.jsx)(A.Col,{xs:12,md:8,children:(0,L.jsx)(A.Radio.Button,{style:{width:"100%"},value:e,children:e})},e)))})})}),(0,L.jsx)(A.Col,{span:24,style:{textAlign:"right"},children:(0,L.jsxs)(A.Space,{size:8,children:[(0,L.jsx)(A.Typography.Text,{children:"Boost"}),(0,L.jsx)(A.Switch,{disabled:!B.length,size:"small",checked:d,onChange:u})]})})]})}),d&&(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(Be,{onSelectNFT:e=>{const t=[...y];return t.push(e),m(t)},boosterAddress:t,selectedNFTs:y,removeNFT:e=>{const t=[...y].filter((t=>t!==e));return m(t)}})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(xe,{estimatedReceive:v,boosterAddress:t,discount:f[g],nftDiscount:T})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Button,{size:"large",type:"primary",block:!0,onClick:async()=>{const e=await w(o.toBase58()),s=x[g];await I({retailer:t,bidAmount:$.utilsBN.decimalize(h,e),lockTime:new(he())(86400*s),askAmount:v,appliedNFTs:y}),c(!1)},loading:E,children:"Buy"})})]})})]})},ke=e=>{let{boosterAddress:t}=e;return(0,L.jsx)(A.Card,{children:(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{justify:"space-between",children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsxs)(A.Space,{size:16,children:[(0,L.jsx)(_,{boosterAddress:t}),(0,L.jsx)(K,{boosterAddress:t}),(0,L.jsx)(A.Tag,{children:"Boost"})]})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(Se,{boosterAddress:t})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(de,{boosterAddress:t})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(le,{boosterAddress:t})})]})})};var Qe=s(93253);const Re=e=>{let{onChange:t}=e;const[s,n]=(0,a.useState)({category:d.AllBooster}),o=(e=>{const t=(0,r.useSelector)((e=>e.boosters)),s=(0,r.useSelector)((e=>e.voucherPrinters)),[n,o]=(0,a.useState)([]),A=(0,a.useMemo)((()=>{const e=new Map;for(const t in s){const r=s[t];e.set(r.retailer.toBase58(),!0)}return e}),[s]),l=(0,a.useCallback)((()=>{const s=[];for(const r in t){const n=t[r];if(n)switch(e.category){case d.AllBooster:s.push(r);break;case d.HotBooster:n.bidTotal.sub(n.bidReserve).isZero()||s.push(r);break;case d.HighBuyBackRate:break;case d.BoostOnly:A.has(r)&&s.push(r)}}return o(s)}),[t,e.category,A]);return(0,a.useEffect)((()=>{l()}),[l]),n})(s);return(0,a.useEffect)((()=>{t(o)}),[o,t]),(0,L.jsx)(A.Row,{children:(0,L.jsx)(A.Col,{children:(0,L.jsx)(A.Select,{style:{width:120},onChange:e=>n({...s,category:e}),placement:"bottomRight",value:s.category,children:u.map((e=>(0,L.jsx)(A.Select.Option,{value:e,children:e},e)))})})})},Me=e=>{let{onChange:t}=e;const[s,o]=(0,a.useState)(""),i=(e=>{const t=(0,r.useSelector)((e=>e.boosters)),[s,o]=(0,a.useState)([]),{tokenProvider:A}=(0,n.useMint)(),l=(0,a.useCallback)((async()=>{if(!e)return o(Object.keys(t));const s=await A.find(e),r=new Map;for(const e of s)r.set(e.address,!0);const n=[];for(const e in t){const s=t[e];(r.has(s.bidMint.toBase58())||r.has(s.askMint.toBase58()))&&n.push(e)}return o(n)}),[t,e,A]);return(0,Qe.Z)((()=>l()),300,[l]),s})(s);return(0,a.useEffect)((()=>{t(i)}),[t,i]),(0,L.jsx)(A.Row,{children:(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Input,{placeholder:"Search LP, token",value:s,prefix:s?(0,L.jsx)(A.Button,{type:"text",style:{width:"auto",height:"auto",background:"transparent",marginLeft:-7},onClick:()=>o(""),icon:(0,L.jsx)(l.Z,{name:"close-outline"})}):(0,L.jsx)(l.Z,{style:{fontSize:"24px",marginLeft:-5},name:"search-outline"}),onChange:e=>o(e.target.value),style:{height:"32px"}})})})},Ne=(0,a.memo)((e=>{let{onChange:t}=e;const[s,r]=(0,a.useState)([]),[n,o]=(0,a.useState)([]),l=(0,a.useCallback)((()=>{const e=[];for(const t of s)n.includes(t)&&e.push(t);console.log("searchedBoosters",s),console.log("displayBoosters",e),t(e)}),[n,t,s]);return(0,Qe.Z)((()=>l()),300,[l]),(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{span:8,style:{marginRight:12},children:(0,L.jsx)(Me,{onChange:r})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(Re,{onChange:o})})]})})),De=()=>{const[e,t]=(0,a.useState)([]);return console.log("displayBoosters",e),(0,L.jsxs)(A.Row,{gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(Ne,{onChange:t})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Row,{gutter:[16,16],children:e.map((e=>(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(ke,{boosterAddress:e})},e)))})})]})},Pe=e=>{let{amount:t,mintAddress:s,size:r}=e;const a=te(s)||0;return(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(J.Z,{mintAddress:s,size:r}),(0,L.jsx)(A.Typography.Text,{children:n.util.numeric($.utilsBN.undecimalize(t,a)).format("0,0.[0000]")}),(0,L.jsx)(A.Typography.Text,{type:"secondary",children:(0,L.jsx)(V.Z,{mintAddress:s})})]})},ze=e=>{let{orderId:t}=e;const{retailer:s,bidAmount:n}=(0,r.useSelector)((e=>e.orders[t.toString()])),{bidMint:a}=(0,r.useSelector)((e=>e.boosters[s.toBase58()]));return(0,L.jsx)(Pe,{amount:n,mintAddress:a.toBase58()})},Ge=e=>{let{orderId:t}=e;const{retailer:s,bidAmount:n}=(0,r.useSelector)((e=>e.orders[t.toString()])),{askMint:a}=(0,r.useSelector)((e=>e.boosters[s.toBase58()]));return(0,L.jsx)(Pe,{amount:n,mintAddress:a.toBase58()})},Oe=e=>{let{orderAddress:t}=e;const{cancelOrder:s}=(e=>{const t=(0,r.useSelector)((e=>e.vouchers)),{senExchange:s}=we(),[n,o]=(0,a.useState)(!1),A=(0,a.useMemo)((()=>Object.keys(t).filter((s=>t[s].order.toBase58()===e.toString()))),[e,t]);return{cancelOrder:(0,a.useCallback)((async()=>{try{o(!0);const r=new b.web3.Transaction,{provider:n}=s,{tx:a}=await s.cancel({order:e,sendAndConfirm:!1});r.add(a),A.forEach((async n=>{const{tx:a}=await s.unlockVoucher({order:e,mintNft:t[n].mintNft,voucher:n,sendAndConfirm:!1});r.add(a)}));const l=await n.sendAndConfirm(r);return ne("Cancel Order",l)}catch(r){ae(r)}finally{o(!1)}}),[e,s,A,t]),loading:n}})(t);return(0,L.jsx)(A.Button,{onClick:s,type:"ghost",children:"Cancel"})},Ye=e=>{let{orderAddress:t}=e;const{redeemOrder:s}=(()=>{const[e,t]=(0,a.useState)(!1),{senExchange:s}=we();return{redeemOrder:(0,a.useCallback)((async e=>{try{t(!0);const{txId:r}=await s.claim({order:e});ne("Redeem Booster",r)}catch(r){ae(r)}finally{t(!1)}}),[s]),loading:e}})();return(0,L.jsx)(A.Button,{onClick:()=>s(t),type:"ghost",children:"Redeem"})},Ze=e=>{let{orderState:t,orderAddress:s}=e;return t.open?(0,L.jsx)(Oe,{orderAddress:s}):t.approved?(0,L.jsx)(Ye,{orderAddress:s}):(0,L.jsx)(A.Button,{type:"text",children:(0,L.jsx)(A.Typography.Text,{strong:!0,children:"Detail"})})},Fe={approved:[12,161,191],open:[212,177,6],rejected:[249,87,94],done:[20,224,65],canceled:[249,87,94],uninitialized:[0,0,0]},He=e=>{let{state:t}=e;const{mode:s}=(0,r.useSelector)((e=>e.settings)),n=e=>{const s=Fe[Object.keys(t)[0]];return e?`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${e})`:`rgba(${s[0]}, ${s[1]}, ${s[2]}, 1)`};return(0,L.jsx)(A.Tag,{style:{margin:0,borderRadius:4,color:n(),textTransform:"capitalize"},color:n(.1),children:s===c.User&&t.open?"Waiting":Object.keys(t)[0]})},Ue=[{title:"TIME",dataIndex:"lastUpdate",render:e=>{const t=$.utilsBN.undecimalize(e,0);return(0,L.jsx)(A.Typography.Text,{children:ce()(1e3*Number(t)).format(p)})}},{title:"ORDER ID",dataIndex:"orderId",render:e=>(0,L.jsxs)(A.Space,{align:"baseline",children:[(0,L.jsx)(A.Typography.Text,{onClick:()=>window.open(n.util.explorer(e.toString()),"_blank"),style:{fontWeight:700,cursor:"pointer"},children:n.util.shortenAddress(e.toString(),8,"...")}),(0,L.jsx)(A.Button,{type:"text",size:"small",onClick:()=>window.open(n.util.explorer(e.toString()),"_blank"),icon:(0,L.jsx)(l.Z,{name:"open-outline"})})]})},{title:"PAY",dataIndex:"orderId",render:e=>(0,L.jsx)(ze,{orderId:e})},{title:"RECEIVE",dataIndex:"orderId",render:e=>(0,L.jsx)(Ge,{orderId:e})},{title:"LOCK TIME",dataIndex:"lockTime",render:e=>(0,L.jsxs)(A.Typography.Text,{children:[e.toString()," days"]})},{title:"STATUS",dataIndex:"state",render:e=>(0,L.jsx)(He,{state:e})},{title:"ACTIONS",dataIndex:"state",render:(e,t)=>{let{orderId:s}=t;return(0,L.jsx)(Ze,{orderState:e,orderAddress:s})}}],Le=e=>{let{dataSource:t}=e;return(0,L.jsx)(A.Row,{children:(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Table,{columns:Ue,dataSource:t,rowClassName:(e,t)=>t%2?"odd-row":"even-row",pagination:!1,scroll:{x:1e3}})})})},We=()=>{const[e,t]=(0,a.useState)({token:"",time:"",status:""}),s=(()=>{const e=(0,r.useSelector)((e=>e.orders)),t=(0,r.useSelector)((e=>e.boosters)),s=(0,r.useSelector)((e=>e.settings.mode)),{wallet:{address:o}}=(0,n.useWallet)(),A=(0,a.useMemo)((()=>{let r=new Set;for(const{retailer:n,authority:a}of Object.values(e)){if(s===c.User&&a.toBase58()!==o)continue;const e=t[n.toBase58()];if(!e)continue;const{bidMint:A,askMint:l}=e;r.add(A.toBase58()),r.add(l.toBase58())}return Array.from(r)}),[t,s,e,o]);return A})();return(0,L.jsxs)(A.Row,{gutter:[12,12],children:[(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{size:4,direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"Token"}),(0,L.jsxs)(A.Select,{style:{width:120},onChange:s=>t({...e,token:s}),placement:"bottomRight",defaultValue:g,children:[(0,L.jsx)(A.Select.Option,{value:g,children:"All token"}),s.map((e=>(0,L.jsx)(A.Select.Option,{value:e,children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(J.Z,{mintAddress:e}),(0,L.jsx)(V.Z,{mintAddress:e})]})})))]})]})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{size:4,direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"Time"}),(0,L.jsx)(A.Select,{style:{width:120},onChange:s=>t({...e,time:s}),placement:"bottomRight",value:e.time,children:j.map((e=>(0,L.jsx)(A.Select.Option,{value:e,children:e})))})]})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{size:4,direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"Status"}),(0,L.jsx)(A.Select,{style:{width:120},onChange:s=>t({...e,status:s}),placement:"bottomRight",value:e.status,children:y.map((e=>(0,L.jsx)(A.Select.Option,{value:e,children:e})))})]})})]})},qe=()=>{const e=(0,r.useSelector)((e=>e.orders)),{wallet:{address:t}}=(0,n.useWallet)(),s=(0,a.useMemo)((()=>{const s=[];for(const r in e){const{authority:n}=e[r];n.toBase58()===t&&s.push({orderId:r,...e[r]})}return s}),[t,e]);return(0,L.jsx)(A.Card,{children:(0,L.jsxs)(A.Row,{gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(We,{})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(Le,{dataSource:s})})]})})},{Panel:Xe}=A.Collapse,Ve=[{question:" What is the Sen Booster?",answer:"Retailer registration mechanism is a process where users can join as liquidity provider for sentre within 7 days to unlock OTC feature."},{question:"How does the Sen Booster work?",answer:"Retailer registration mechanism is a process where users can join as liquidity provider for sentre within 7 days to unlock OTC feature."},{question:"How do I buy token?",answer:"Retailer registration mechanism is a process where users can join as liquidity provider for sentre within 7 days to unlock OTC feature."},{question:"What is the NFT used for?",answer:"Retailer registration mechanism is a process where users can join as liquidity provider for sentre within 7 days to unlock OTC feature."}];const Ke=function(){return(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Title,{level:3,children:"FAQ"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Collapse,{defaultActiveKey:["0"],bordered:!1,expandIconPosition:"end",ghost:!0,children:Ve.map(((e,t)=>(0,L.jsx)(Xe,{header:`${t+1} ${e.question}`,children:(0,L.jsx)(A.Typography.Text,{children:e.answer})},t)))})})]})},Je=s.p+"static/media/header_banner.c63186199c62e4a75f47.png",_e=()=>(0,L.jsx)(A.Row,{gutter:[24,24],children:(0,L.jsx)(A.Col,{style:{height:"100%",width:"100%",borderRadius:16,backgroundImage:`url(${Je})`},children:(0,L.jsxs)(A.Space,{direction:"vertical",style:{padding:24},children:[(0,L.jsx)(A.Typography.Title,{level:2,style:{fontWeight:800,color:"#0B358F"},children:"100% OTC Market built on Smart Contracts"}),(0,L.jsxs)(A.Space,{children:[(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(l.Z,{name:"checkmark-circle",style:{fontSize:14}}),(0,L.jsx)(A.Typography.Title,{level:5,children:" No Slippage"})]}),(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(l.Z,{name:"checkmark-circle",style:{fontSize:14}}),(0,L.jsx)(A.Typography.Title,{level:5,children:" No Price impact"})]})]})]})})}),$e=e=>{let{children:t}=e;return(0,L.jsx)(A.Row,{justify:"center",children:(0,L.jsx)(A.Col,{span:16,children:(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(_e,{})}),(0,L.jsx)(A.Col,{span:24,children:t})]})})})};const et=function(){const[e,t]=(0,a.useState)(i.Booster);return(0,L.jsx)($e,{children:(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(X,{tabId:e,setTabId:t})}),(0,L.jsx)(A.Col,{span:24,children:e===i.Booster?(0,L.jsx)(De,{}):(0,L.jsx)(qe,{})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(Ke,{})})]})})};var tt=s(51518),st=s.n(tt);const rt=e=>{let{label:t,mintAddress:s="",align:r}=e;return(0,L.jsxs)(A.Space,{size:12,direction:"vertical",align:r,children:[(0,L.jsx)(A.Typography.Text,{children:t}),(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(J.Z,{mintAddress:s}),(0,L.jsx)(V.Z,{mintAddress:s})]})]})},nt=e=>{let{label:t,value:s,mintAddress:r="",size:n=8,align:a="start"}=e;return r?(0,L.jsx)(rt,{align:a,label:t,mintAddress:r}):(0,L.jsxs)(A.Space,{align:a,size:n,direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{className:"caption",type:"secondary",children:t}),s]})},at=e=>{let{boosterAddress:t}=e;const[s,n]=(0,a.useState)({}),o=(0,r.useSelector)((e=>e.boosters[t].metadata)),l=(0,a.useCallback)((async()=>{const e=await oe.methods.booster.get(o);return e.payRate?n(e.payRate):n({})}),[o]);return(0,a.useEffect)((()=>{l()}),[l]),(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Title,{level:5,children:"Pay rate"})}),(0,L.jsx)(A.Col,{span:14,children:(0,L.jsxs)(A.Row,{gutter:[4,4],children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsxs)(A.Space,{direction:"vertical",size:4,children:[(0,L.jsx)(A.Typography.Text,{type:"secondary",className:"caption",children:"Lock time"}),Object.keys(s).map((e=>(0,L.jsx)(A.Typography.Text,{children:e},e)))]})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{direction:"vertical",size:4,children:[(0,L.jsx)(A.Typography.Text,{type:"secondary",className:"caption",children:"Rate"}),Object.values(s).map((e=>(0,L.jsxs)(A.Typography.Text,{children:[e," %"]},e)))]})})]})})]})},ot=e=>{let{mintAddress:t}=e;const[s,r]=(0,a.useState)(!1),{nftInfo:o}=ge(t);return(0,L.jsxs)(A.Row,{align:"middle",children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsx)(A.Typography.Text,{children:null===o||void 0===o?void 0:o.name})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{style:{cursor:"pointer"},children:[(0,L.jsx)(A.Typography.Text,{onClick:()=>window.open(n.util.explorer(t),"_blank"),type:"secondary",underline:!0,children:(0,ee.shortenAddress)(t)}),(0,L.jsx)(A.Tooltip,{title:"Copied",visible:s,children:(0,L.jsx)(st(),{text:t,children:(0,L.jsx)(l.Z,{onClick:async()=>{r(!0),await n.util.asyncWait(1500),r(!1)},name:"copy-outline"})})})]})})]})},At=e=>{let{value:t,label:s}=e;return(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{flex:"auto",children:s}),(0,L.jsx)(A.Col,{children:t})]})},lt=e=>{let{boosterAddress:t}=e;const s=ye(t);return(0,L.jsxs)(A.Row,{gutter:[8,8],align:"middle",children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(At,{label:(0,L.jsx)(A.Typography.Title,{level:5,children:"Boost by NFT"}),value:(0,L.jsx)(A.Typography.Text,{children:s.length?"Enable":"Disable"})})}),s.map((e=>{let{collection:t}=e;return(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(ot,{mintAddress:t.toBase58()})},t.toBase58())}))]})},it=e=>{let{boosterAddress:t}=e;const[s,o]=(0,a.useState)(""),{bidMint:i,askMint:c,startAt:d,endAt:u}=(0,r.useSelector)((e=>e.boosters[t])),{budget:h}=Ae(t),x=async e=>{o(e),await n.util.asyncWait(1500),o("")};return(0,L.jsx)(A.Card,{className:"card-manage-body",bordered:!1,children:(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Title,{level:5,children:"General information"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{wrap:!1,children:[(0,L.jsx)(A.Col,{span:9,children:(0,L.jsx)(nt,{label:"Buy-back LP address",value:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Typography.Text,{children:(0,ee.shortenAddress)(c.toBase58())}),(0,L.jsx)(A.Tooltip,{title:"Copied",visible:s===c.toBase58(),children:(0,L.jsx)(st(),{text:c.toBase58(),children:(0,L.jsx)(A.Button,{type:"text",onClick:()=>x(c.toBase58()),icon:(0,L.jsx)(l.Z,{name:"copy-outline"})})})})]})})}),(0,L.jsx)(A.Col,{span:9,children:(0,L.jsx)(nt,{label:"Pay mint address",value:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Typography.Text,{children:(0,ee.shortenAddress)(i.toBase58())}),(0,L.jsx)(A.Tooltip,{title:"Copied",visible:s===i.toBase58(),children:(0,L.jsx)(st(),{text:i.toBase58(),children:(0,L.jsx)(A.Button,{type:"text",onClick:()=>x(i.toBase58()),icon:(0,L.jsx)(l.Z,{name:"copy-outline"})})})})]})})})]})}),(0,L.jsx)(A.Col,{span:24}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{justify:"space-between",wrap:!1,children:[(0,L.jsx)(A.Col,{span:9,children:(0,L.jsx)(nt,{label:"Start date",value:(0,L.jsx)(A.Typography.Text,{children:ce()(1e3*d.toNumber()).format(p)})})}),(0,L.jsx)(A.Col,{span:9,children:(0,L.jsx)(nt,{label:"End date",value:(0,L.jsx)(A.Typography.Text,{children:ce()(1e3*u.toNumber()).format(p)})})}),(0,L.jsx)(A.Col,{span:6,children:(0,L.jsx)(nt,{label:"Budget",value:(0,L.jsxs)(A.Typography.Text,{children:[(0,ee.numeric)(h).format("0.0,[000]")," ",(0,L.jsx)(V.Z,{mintAddress:i})]})})})]})}),(0,L.jsx)(A.Col,{span:24}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(at,{boosterAddress:t})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(lt,{boosterAddress:t})})]})})},ct=e=>{let{boosterAddress:t}=e;const[s,n]=(0,a.useState)("0"),o=(0,r.useSelector)((e=>e.boosters[t].bidMint)),{updateBudget:l,loading:i}=(()=>{const[e,t]=(0,a.useState)(!1),{senExchange:s}=we();return{updateBudget:(0,a.useCallback)((async e=>{let{metadata:r,boosterAddress:n}=e;try{t(!0);const{txId:e}=await s.updateRetailerMetaData({retailer:n,metadata:r,sendAndConfirm:!0});ne("Updated budget",e)}catch(a){ae(a)}finally{t(!1)}}),[s]),loading:e}})(),c=Ae(t);return(0,a.useEffect)((()=>{n(c.budget)}),[c.budget]),(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{direction:"vertical",style:{width:"100%"},children:[(0,L.jsx)(A.Typography.Text,{children:"Amount"}),(0,L.jsx)(A.Input,{prefix:(0,L.jsx)(V.Z,{mintAddress:o.toBase58()}),value:s,defaultValue:c.budget,onChange:e=>n(e.target.value),className:"input-budget"})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Button,{loading:i,size:"large",block:!0,type:"primary",onClick:async()=>{const e={...c,budget:s},{digest:r}=await oe.methods.booster.set(e);return l({boosterAddress:t,metadata:r})},children:"Update"})})]})},dt=e=>{let{boosterAddress:t}=e;const{freezeBooster:s,loading:r}=(()=>{const[e,t]=(0,a.useState)(!1),{senExchange:s}=we();return{freezeBooster:(0,a.useCallback)((async e=>{let{boosterAddress:r}=e;try{t(!0);const{txId:e}=await s.freezeRetailer({retailer:r,sendAndConfirm:!0});ne("Freezed",e)}catch(n){ae(n)}finally{t(!1)}}),[s]),loading:e}})();return(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Badge,{status:"success"}),(0,L.jsxs)(A.Typography.Text,{type:"secondary",children:["Current status: ",(0,L.jsx)("span",{style:{color:"#212433"},children:"Active"})]})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{align:"start",children:[(0,L.jsx)(l.Z,{name:"information-circle-outline"}),(0,L.jsx)(A.Typography.Text,{type:"secondary",children:"Freezing a booster will prevent all actions until the booster has been thawed."})]})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Button,{onClick:()=>s({boosterAddress:t}),block:!0,type:"primary",size:"large",loading:r,children:"Freeze"})})]})},ut=e=>{let{boosterAddress:t}=e;const{thawBooster:s,loading:r}=(()=>{const[e,t]=(0,a.useState)(!1),{senExchange:s}=we();return{thawBooster:(0,a.useCallback)((async e=>{let{boosterAddress:r}=e;try{t(!0);const{txId:e}=await s.thawRetailer({retailer:r,sendAndConfirm:!0});ne("Thawed",e)}catch(n){ae(n.message)}finally{t(!1)}}),[s]),loading:e}})();return(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Badge,{status:"error"}),(0,L.jsxs)(A.Typography.Text,{type:"secondary",children:["Current status: ",(0,L.jsx)("span",{style:{color:"#F9575E"},children:"Frozen"})]})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{align:"start",children:[(0,L.jsx)(l.Z,{name:"information-circle-outline"}),(0,L.jsx)(A.Typography.Text,{type:"secondary",children:"Thaw a booster will active all actions."})]})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Button,{onClick:()=>s({boosterAddress:t}),block:!0,type:"primary",size:"large",loading:r,style:{background:"#F9575E",border:"none"},children:"Thaw"})})]})},{TabPane:ht}=A.Tabs,xt=e=>{let{boosterAddress:t}=e;const[s,n]=(0,a.useState)(!1),o=(0,r.useSelector)((e=>e.boosters[t]));return(0,L.jsxs)(a.Fragment,{children:[(0,L.jsx)(A.Button,{ghost:!0,onClick:()=>n(!0),block:!0,children:"Manage"}),(0,L.jsx)(A.Modal,{className:"card-manage",closeIcon:(0,L.jsx)(l.Z,{name:"close-outline"}),footer:null,onCancel:()=>n(!1),visible:s,title:(0,L.jsx)(A.Typography.Title,{level:4,children:"Manage booster"}),children:(0,L.jsxs)(A.Row,{gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(it,{boosterAddress:t})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Tabs,{children:[(0,L.jsx)(ht,{tab:"Budget",children:(0,L.jsx)(ct,{boosterAddress:t})},"budget"),(0,L.jsx)(ht,{tab:"Freeze/Thaw",children:o.state.frozen?(0,L.jsx)(ut,{boosterAddress:t}):(0,L.jsx)(dt,{boosterAddress:t})},"freeze-thaw")]})})]})})]})},pt=e=>{let{boosterAddress:t}=e;const{askMint:s,bidMint:n,startAt:a,endAt:o}=(0,r.useSelector)((e=>e.boosters[t])),i=ye(t);return(0,L.jsx)(A.Card,{children:(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{justify:"space-between",align:"middle",children:[(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{label:"Buy-back",mintAddress:s.toBase58()})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(l.Z,{name:"arrow-forward-outline"})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{align:"end",label:"Pay",mintAddress:n.toBase58()})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{justify:"space-between",wrap:!1,children:[(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{label:"Start date",value:(0,L.jsx)(A.Typography.Text,{children:ce()(1e3*a.toNumber()).format(p)})})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{label:"End date",value:(0,L.jsx)(A.Typography.Text,{children:ce()(1e3*o.toNumber()).format(p)})})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{label:"Boost",value:(0,L.jsx)(A.Typography.Text,{children:i.length?"Enable":"Disable"})})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(le,{boosterAddress:t})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(xt,{boosterAddress:t})})]})})},gt=()=>{const e=(0,r.useSelector)((e=>e.boosters)),{wallet:{address:t}}=(0,n.useWallet)();return{ownBoosters:(0,a.useMemo)((()=>Object.keys(e).filter((s=>e[s].authority.toBase58()===t))),[e,t])}},jt=()=>{const{pushHistory:e}=R(),{ownBoosters:t}=gt();return(0,L.jsxs)(A.Row,{gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsx)(We,{})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(A.Button,{type:"primary",onClick:()=>e("/create-booster"),children:"Add booster"})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Row,{gutter:[24,24],children:t.map((e=>(0,L.jsx)(A.Col,{xs:24,md:12,children:(0,L.jsx)(pt,{boosterAddress:e})},e)))})})]})},yt=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t].state)),{approveOrder:n,loading:o}=(()=>{const[e,t]=(0,a.useState)(!1),{senExchange:s}=we();return{approveOrder:(0,a.useCallback)((async e=>{try{t(!0);const r=new b.web3.Transaction,n=new b.web3.PublicKey(e),{tx:a}=await s.approveOrder({order:n,sendAndConfirm:!1});r.add(a);const{tx:o}=await s.collectOrder({order:n,sendAndConfirm:!1});r.add(o);const{provider:A}=s,l=await A.sendAndConfirm(r);return ne("Approved",l)}catch(r){ae(r)}finally{t(!1)}}),[s]),loading:e}})();return(0,L.jsx)(A.Button,{type:"primary",loading:o,disabled:!!s.approved||!!s.rejected,onClick:()=>n(t),children:"Approve"})},mt=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t].state)),{rejectOrder:n,loading:o}=(()=>{const[e,t]=(0,a.useState)(!1),{senExchange:s}=we();return{rejectOrder:(0,a.useCallback)((async e=>{let{orderAddress:r}=e;try{t(!0);const e=new b.web3.PublicKey(r),{txId:n}=await s.rejectOrder({order:e});ne("Rejected",n)}catch(n){ae(n.message)}finally{t(!1)}}),[s]),loading:e}})();return(0,L.jsx)(A.Button,{loading:o,disabled:!!s.approved||!!s.rejected,onClick:()=>n({orderAddress:t}),children:"Reject"})},Ct=e=>{let{orderAddress:t}=e;const s=(0,r.useSelector)((e=>e.orders[t]));return console.log(s),(0,L.jsxs)(A.Row,{gutter:[8,8],align:"middle",children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsxs)(A.Row,{gutter:[48,48],children:[(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{label:"Market price",value:(0,L.jsx)(A.Typography.Text,{children:"1 LP = 6.12 USDC"})})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{label:"Used NFT slot",value:(0,L.jsx)(A.Typography.Text,{children:"1"})})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(nt,{label:"Total boost rate",value:(0,L.jsx)(A.Typography.Text,{children:"110,5%"})})})]})}),(0,L.jsx)(A.Col,{children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(mt,{orderAddress:t}),(0,L.jsx)(yt,{orderAddress:t})]})})]})},Bt=e=>{let{bidAmount:t,boosterAddress:s}=e;const n=(0,r.useSelector)((e=>e.boosters[s])),a=n?n.bidMint.toBase58():"",o=te(a)||0;return(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(J.Z,{mintAddress:a}),(0,L.jsx)(A.Typography.Text,{children:(0,ee.numeric)($.utilsBN.undecimalize(t,o)).format("0,0.[000]")}),(0,L.jsx)(V.Z,{mintAddress:a})]})},bt=e=>{let{askAmount:t,boosterAddress:s}=e;const n=(0,r.useSelector)((e=>e.boosters[s])),a=n?n.askMint.toBase58():"",o=te(a)||0;return(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(J.Z,{mintAddress:a}),(0,L.jsx)(A.Typography.Text,{children:(0,ee.numeric)($.utilsBN.undecimalize(t,o)).format("0,0.[000]")}),(0,L.jsx)(V.Z,{mintAddress:a})]})},ft=[{title:"TIME",dataIndex:"createAt",key:"createAt",render:e=>(0,L.jsx)(A.Typography.Text,{children:ce()(1e3*Number(e)).format(p)})},{title:"BUY-BACK",dataIndex:"bidAmount",key:"bidAmount",render:(e,t)=>{let{retailer:s}=t;return(0,L.jsx)(Bt,{bidAmount:e,boosterAddress:s.toBase58()})}},{title:"PAY",dataIndex:"askAmount",key:"askAmount",render:(e,t)=>{let{retailer:s}=t;return(0,L.jsx)(bt,{askAmount:e,boosterAddress:s.toBase58()})}},{title:"LOCK TIME",dataIndex:"lockTime",key:"lockTime",render:e=>(0,L.jsxs)(A.Typography.Text,{children:[e.div(new(he())(86400)).toString()," days"]})},{title:"STATUS",key:"state",dataIndex:"state",render:e=>(0,L.jsx)(He,{state:e})}],wt=e=>{let{dataSource:t}=e;return(0,L.jsx)(A.Table,{columns:ft,dataSource:t,pagination:!1,rowKey:e=>e.orderAddress,expandable:{expandedRowRender:e=>(0,L.jsx)(Ct,{orderAddress:e.orderAddress})}})};const It=function(){const{orderRequests:e}=(()=>{const e=(0,r.useSelector)((e=>e.orders)),{ownBoosters:t}=gt(),s=(0,a.useMemo)((()=>Object.keys(e).map((t=>({...e[t],orderAddress:t}))).filter((e=>{let{retailer:s}=e;return t.includes(s.toBase58())}))),[t,e]);return{orderRequests:s}})(),t=e.sort(((e,t)=>Number(t.createAt)-Number(e.createAt)));return(0,L.jsx)(A.Card,{bordered:!1,children:(0,L.jsxs)(A.Row,{gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(We,{})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(wt,{dataSource:t})})]})})};const Et=function(){const[e,t]=(0,a.useState)(i.BoostList);return(0,L.jsx)($e,{children:(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(X,{tabId:e,setTabId:t,isRetailer:!0})}),(0,L.jsx)(A.Col,{span:24,children:e===i.BoostList?(0,L.jsx)(jt,{}):(0,L.jsx)(It,{})})]})})};var Tt=s(71946);const vt=e=>{let{label:t,value:s}=e;return(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Text,{children:t})}),(0,L.jsx)(A.Col,{span:24,children:s})]})},St={dark:{padding:"4px 12px",height:40,width:"100%",background:"#232324",border:"1px solid #373947"},light:{padding:"4px 12px",height:40,width:"100%",background:"#EBEDED",border:"none"}},kt=(0,a.forwardRef)(((e,t)=>{const[s,r]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(0),[x,g]=(0,a.useState)(0),{ui:{theme:j}}=(0,n.useUI)();return(0,a.useImperativeHandle)(t,(()=>({collect:()=>({bidMint:s,askMint:o,budget:c,startTime:u,endTime:x})}))),(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Title,{level:5,children:"General information"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[16,16],children:[(0,L.jsx)(A.Col,{span:24,className:"retailer-mint-selection",children:(0,L.jsx)(vt,{label:"Buy-back",value:(0,L.jsx)(Tt.Z,{value:o,onChange:i,placeholder:"Select LP",style:{...St[j],textAlign:"left"}})})}),(0,L.jsx)(A.Col,{span:24,className:"retailer-mint-selection",children:(0,L.jsx)(vt,{label:"Pay",value:(0,L.jsx)(Tt.Z,{value:s,onChange:r,placeholder:"Select a token",style:{...St[j],textAlign:"left"}})})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(vt,{label:"Budget",value:(0,L.jsx)(A.Input,{onChange:e=>d(e.target.value),value:c,placeholder:"Input the budget amount of pay token",className:"retailer-input",size:"large"})})}),(0,L.jsx)(A.Col,{span:12,children:(0,L.jsx)(vt,{label:"Start time",value:(0,L.jsx)(A.DatePicker,{placeholder:"Select time",suffixIcon:(0,L.jsx)(l.Z,{name:"time-outline"}),className:"date-option",onChange:e=>h((null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:u?ce()(u):null,showTime:{showSecond:!1},placement:"bottomRight",format:p})})}),(0,L.jsx)(A.Col,{span:12,children:(0,L.jsx)(vt,{label:"End time",value:(0,L.jsx)(A.DatePicker,{placeholder:"Select time",suffixIcon:(0,L.jsx)(l.Z,{name:"time-outline"}),className:"date-option",onChange:e=>g((null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:x?ce()(x):null,showTime:{showSecond:!1},placement:"bottomRight",format:p})})})]})})]})})),Qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYCAYAAACadoJwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABbySURBVHgB7d2NTht3vsfh2S5NgPDahHIQ6v1fUKW9gQhFUUoxL00INMnJzxzv5nQbz9ie+WKb55GsdovBiFnBfPx/+8evv/7rSwMAADC8Lz80AAAAIQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAA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o6OXpmM9EXW9a/Srrj0A8/EXE2AB9S64dQBPQy24r2stPgAWYwQEYEEVH69fn413vdrdfbFWp6Hzn+2Xawc0ABbnryRAT+oGtd4d39zcHJ8jIURW2/39n+PT77scQAlAd/46AvSoRkMqQupR52pUjGxtPW/++c+N5scfN6wVWVIVGJ8+ff4aHXfNhw8fx9OtnG4OMAwBAjCQuomtx9c30AGA/+OtOAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAICYjQYAAGA2X5r5fPlf5FkMkmAd32wAAAAASUVORK5CYII=",Rt=e=>{let{mintAddress:t,onDelete:s}=e;const{nftInfo:r,loading:n}=ge(t);return(0,L.jsxs)(A.Card,{bordered:!1,bodyStyle:{padding:10},loading:n,className:"card-nft-image-only",children:[(0,L.jsx)(A.Image,{src:(null===r||void 0===r?void 0:r.image)||Qt,preview:!1,style:{borderRadius:4},width:88,height:88,className:"nft-image"}),(0,L.jsx)(l.Z,{onClick:()=>s(t),className:"icon-delete-nft",name:"trash-outline"})]})};var Mt=s(87408);const Nt=e=>{let{onSearch:t,loading:s=!1}=e;return(0,L.jsx)(A.Input,{prefix:(0,L.jsx)(A.Button,{type:"text",size:"small",icon:s?(0,L.jsx)(A.Spin,{indicator:(0,L.jsx)(Mt.Z,{style:{fontSize:14}})}):(0,L.jsx)(l.Z,{name:"search-outline"})}),placeholder:"Search by collection address",style:{width:"100%"},onChange:e=>t(e.target.value)})},Dt=e=>{let{mintAddress:t,onSelect:s}=e;const{ui:{width:r}}=(0,n.useUI)(),o=(0,a.useMemo)((()=>r<768?150:198),[r]),{nftInfo:l,loading:i}=ge(t);return(0,L.jsx)(A.Card,{bordered:!1,style:{cursor:"pointer",textAlign:"center"},bodyStyle:{padding:"15px 0 10px 0"},loading:i,onClick:()=>s(t),children:(0,L.jsxs)(A.Row,{children:[(0,L.jsx)(A.Col,{span:24,style:{textAlign:"center",width:o},children:(0,L.jsx)(A.Image,{src:(null===l||void 0===l?void 0:l.image)||Qt,preview:!1,style:{borderRadius:4},width:o,height:o})}),(0,L.jsx)(A.Col,{span:24,style:{textAlign:"center",paddingTop:"8px"},children:(0,L.jsx)(A.Typography.Text,{children:null===l||void 0===l?void 0:l.name})})]})})},{sol:{metaplexNFT:Pt}}=S,zt=e=>{let{onSelect:t}=e;const[s,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)([]),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),{wallet:{address:x}}=(0,n.useWallet)(),{nfts:p}=Ce(x),g=(0,a.useCallback)((async()=>{let e=[];if(!se.account.isAddress(c))return e;let t=await Pt.getNftMetadata(c);return t.data?e.push(t.data.mint):e=[],e}),[c]),j=e=>{t(e),y()},y=()=>{d(""),r(!1)},m=(0,a.useCallback)((async()=>{h(!0);let e=[];try{if(c.length>0)e=await g();else{if(!p)return;for(const{collection:t}of p){const s=null===t||void 0===t?void 0:t.key;s&&(e.includes(s)||e.push(s))}}}catch(t){return window.notify({type:"error",description:t.message})}finally{h(!1)}return i(e)}),[g,p,c.length]);return(0,a.useEffect)((()=>{m()}),[m]),(0,L.jsxs)(a.Fragment,{children:[(0,L.jsx)(A.Button,{onClick:()=>r(!0),size:"large",type:"dashed",className:"btn-nft",children:(0,L.jsxs)(A.Row,{gutter:[8,8],justify:"center",children:[(0,L.jsx)(A.Col,{span:12,children:(0,L.jsx)(l.Z,{style:{fontSize:24},name:"add-outline"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Typography.Text,{children:["Add NFT ",(0,L.jsx)("br",{})," collections"]})})]})}),(0,L.jsx)(A.Modal,{className:"modal-nft-selection",visible:s,footer:!1,onCancel:y,closeIcon:(0,L.jsx)(l.Z,{name:"close-outline"}),children:(0,L.jsxs)(A.Row,{gutter:[24,24],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Title,{level:4,children:"Select a NFT collection"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(Nt,{loading:u,searchText:c,onSearch:e=>d(e)})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Row,{gutter:[24,24],className:"scrollbar",style:{height:500},children:o.length>0?o.map((e=>(0,L.jsx)(A.Col,{xs:12,md:12,children:(0,L.jsx)(Dt,{mintAddress:e,onSelect:j})},e))):(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Empty,{})})})})]})})]})},Gt=()=>(0,L.jsxs)(A.Typography.Text,{style:{color:"#E9E9EB"},children:["Enable ",(0,L.jsx)("span",{style:{color:"#0FB5B8"},children:"Boost"})," means that you allow an additional rate of payment when users use NFTs. ",(0,L.jsx)("br",{})," There are 3 slots in all to use NFTs, with each slot used will increase the payout rate by 2.5%."]}),Ot=e=>{let{collections:t,onChange:s}=e;const[r,n]=(0,a.useState)(!1),o=e=>{const r=[...t],n=r.findIndex((t=>e===t));return-1!==n&&r.splice(n,1),s(r)};return(0,L.jsxs)(A.Row,{gutter:[12,12],children:[(0,L.jsx)(A.Col,{flex:"auto",children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Typography.Title,{level:5,children:"Boost by NFT"}),(0,L.jsx)(A.Tooltip,{placement:"bottomRight",title:(0,L.jsx)(Gt,{}),children:(0,L.jsx)(l.Z,{name:"information-circle-outline"})})]})}),(0,L.jsx)(A.Col,{children:(0,L.jsx)(A.Switch,{size:"small",onChange:e=>{e||s([]),n(e)}})}),r&&(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{size:12,children:[t.map((e=>(0,L.jsx)(Rt,{onDelete:o,mintAddress:e},e))),(0,L.jsx)(zt,{onSelect:e=>{const r=[...t];return t.includes(e)||r.push(e),s(r)}})]})})]})},Yt=["7 days","30 days","60 days","90 days","120 days","365 days"],Zt=e=>{let{payRate:t,setPayRate:s}=e;return(0,L.jsxs)(A.Row,{gutter:[8,8],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Typography.Title,{level:5,children:"Pay rate"}),(0,L.jsx)(A.Tooltip,{title:"You can set the pay rate to 0 at the lock time you don't want to use. But there must be at least 1 field with a ratio greater than Zero.",children:(0,L.jsx)(l.Z,{name:"information-circle-outline"})})]})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Row,{gutter:[16,16],children:Yt.map((e=>(0,L.jsx)(A.Col,{className:"pay-rate",span:12,children:(0,L.jsx)(vt,{label:e,value:(0,L.jsx)(A.InputNumber,{className:"retailer-input",size:"large",placeholder:"Input rate",value:t[e],onChange:t=>s(t,e)})})},e)))})})]})},Ft=e=>{let{visible:t,setVisible:s}=e;const{pushHistory:r}=R();return(0,L.jsxs)(a.Fragment,{children:[(0,L.jsx)(A.Button,{size:"large",block:!0,onClick:()=>s(!0),children:"Cancel"}),(0,L.jsx)(A.Modal,{visible:t,closeIcon:(0,L.jsx)(l.Z,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,L.jsxs)(A.Row,{gutter:[32,32],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Space,{size:15,align:"baseline",children:[(0,L.jsx)(l.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,L.jsxs)(A.Space,{size:4,direction:"vertical",children:[(0,L.jsx)(A.Typography.Text,{children:"Are you sure you want to cancel?"}),(0,L.jsx)(A.Typography.Text,{type:"secondary",children:"Your data will not be saved."})]})]})}),(0,L.jsx)(A.Col,{span:24,style:{textAlign:"right"},children:(0,L.jsxs)(A.Space,{children:[(0,L.jsx)(A.Button,{onClick:()=>s(!1),type:"ghost",children:"No"}),(0,L.jsx)(A.Button,{onClick:()=>r("/retailer"),type:"primary",children:"Yes"})]})})]})})]})},Ht=()=>{const e=(0,a.useRef)({}),[t,s]=(0,a.useState)({}),[r,n]=(0,a.useState)([]),[o,l]=(0,a.useState)(!1),{initializeBooster:i,loading:c}=(()=>{const{senExchange:e}=we(),[t,s]=(0,a.useState)(!1),r=(0,a.useCallback)((async t=>{let{bidMint:r,askMint:n,startTime:a,endTime:o,budget:A,collections:l,payRate:i}=t;try{s(!0);const t={payRate:i,budget:A},{digest:c}=await oe.methods.booster.set(t),d=a-Date.now(),u=o-Date.now(),{provider:h}=e,x=new b.web3.Transaction,p=b.web3.Keypair.generate(),g=[p],{tx:j}=await e.initializeRetailer({bidMint:r,askMint:n,askTotal:new(he())(0),bidTotal:new(he())(0),startAfter:new(he())(d/1e3),endAfter:new(he())(u/1e3),metadata:c,sendAndConfirm:!1,retailer:p});x.add(j);for(const s of l){const t=b.web3.Keypair.generate(),{tx:r}=await e.initializeVoucherPrinter({collection:s,discount:$.utilsBN.decimalize(.025,9),retailer:p.publicKey,total:new(he())(1e6),voucherPrinter:t,sendAndConfirm:!1});g.push(t),x.add(r)}const y=await h.sendAndConfirm(x,g);return ne("Add new Booster",y)}catch(c){return ae(c)}finally{s(!1)}}),[e]);return{initializeBooster:r,loading:t}})(),{pushHistory:d}=R(),u=(0,a.useMemo)((()=>Object.keys(t).length<6),[t]);return(0,L.jsx)(A.Row,{justify:"center",children:(0,L.jsx)(A.Col,{xs:24,md:16,lg:10,children:(0,L.jsx)(A.Card,{children:(0,L.jsxs)(A.Row,{gutter:[32,32],children:[(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(A.Typography.Title,{level:4,children:"Create booster"})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(kt,{ref:e})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(Zt,{payRate:t,setPayRate:(e,r)=>{const n={...t};return n[r]=Number(e),s(n)}})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsx)(Ot,{collections:r,onChange:n})}),(0,L.jsx)(A.Col,{span:24,children:(0,L.jsxs)(A.Row,{gutter:[12,12],children:[(0,L.jsx)(A.Col,{xs:24,md:12,children:(0,L.jsx)(Ft,{visible:o,setVisible:l})}),(0,L.jsx)(A.Col,{xs:24,md:12,children:(0,L.jsx)(A.Button,{size:"large",block:!0,onClick:async()=>{const s=e.current.collect();return await i({...s,payRate:t,collections:r}),d("/retailer")},loading:c,disabled:u,children:"Create"})})]})})]})})})})},Ut="boosters",Lt=(0,M.createAsyncThunk)("boosters/initBoosters",(async e=>e)),Wt=(0,M.createAsyncThunk)("boosters/upsetBooster",(async e=>{let{address:t,data:s}=e;if(!se.account.isAddress(t))throw new Error("Invalid booster address");if(!s)throw new Error("Data is empty");return{[t]:s}})),qt=(0,M.createSlice)({name:Ut,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Lt.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Wt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Xt=e=>{const{program:t,name:s,filter:r,upset:n,init:o,Loading:A,children:l}=e,[i,c]=(0,a.useState)(0),[d,u]=(0,a.useState)(!0),{accountClient:h,connection:x}=(0,a.useMemo)((()=>{var e;const r=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[s];return{accountClient:r,connection:r.provider.connection}}),[s,null===t||void 0===t?void 0:t.account]),p=(0,a.useCallback)((async()=>{try{u(!0);const e=await h.all(),t={};for(const s of e)t[s.publicKey.toBase58()]=s.account;o(t)}catch(e){ae(e)}finally{u(!1)}}),[h,o]),g=(0,a.useCallback)((async()=>{if(i)return;const e=x.onProgramAccountChange(h.programId,(async e=>{const r=e.accountId.toBase58(),a=e.accountInfo.data,o=t.coder.accounts.decode(s,a);n(r,o)}),"confirmed",[{dataSize:h.size},{memcmp:{offset:0,bytes:(0,$.encodeIxData)((0,$.accountDiscriminator)(s))}},...r]);c(e)}),[h.programId,h.size,x,r,s,t.coder.accounts,n,i]);return(0,a.useEffect)((()=>(p(),g(),()=>{(async()=>{i&&(await x.removeProgramAccountChangeListener(i),c(0))})()})),[x,p,g,i]),d?(0,L.jsx)(a.Fragment,{children:A}):(0,L.jsx)(a.Fragment,{children:l})},Vt=[],Kt=()=>{const e=(0,r.useDispatch)(),t=(0,a.useCallback)((t=>e(Lt(t))),[e]),s=(0,a.useCallback)(((t,s)=>e(Wt({address:t,data:s}))),[e]);return(0,L.jsx)(Xt,{program:window.senBooster.program,name:"retailer",filter:Vt,init:t,upset:s})},Jt="orders",_t=(0,M.createAsyncThunk)("orders/initOrders",(async e=>e)),$t=(0,M.createAsyncThunk)("orders/upsetOrder",(async e=>{let{address:t,data:s}=e;if(!se.account.isAddress(t))throw new Error("Invalid order address");if(!s)throw new Error("Data is empty");return{[t]:s}})),es=(0,M.createSlice)({name:Jt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(_t.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase($t.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ts=[],ss=()=>{const e=(0,r.useDispatch)(),t=(0,a.useCallback)((t=>e(_t(t))),[e]),s=(0,a.useCallback)(((t,s)=>e($t({address:t,data:s}))),[e]);return(0,L.jsx)(Xt,{program:window.senBooster.program,name:"order",filter:ts,init:t,upset:s})},rs="voucher",ns=(0,M.createAsyncThunk)("voucher/initVouchers",(async e=>e)),as=(0,M.createAsyncThunk)("voucher/upsetVoucher",(async e=>{let{address:t,data:s}=e;return{[t]:s}})),os=(0,M.createSlice)({name:rs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(ns.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(as.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,As=[],ls=()=>{const e=(0,r.useDispatch)(),t=(0,a.useCallback)((t=>e(ns(t))),[e]),s=(0,a.useCallback)(((t,s)=>e(as({address:t,data:s}))),[e]);return(0,L.jsx)(Xt,{program:window.senBooster.program,name:"voucher",filter:As,init:t,upset:s})},is="voucherPrinter",cs=(0,M.createAsyncThunk)("voucherPrinter/initVoucherPrinters",(async e=>e)),ds=(0,M.createAsyncThunk)("voucherPrinter/upsetVoucherPrinters",(async e=>{let{address:t,data:s}=e;return{[t]:s}})),us=(0,M.createSlice)({name:is,initialState:{},reducers:{},extraReducers:e=>{e.addCase(cs.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(ds.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,hs=[],xs=()=>{const e=(0,r.useDispatch)(),t=(0,a.useCallback)((t=>e(cs(t))),[e]),s=(0,a.useCallback)(((t,s)=>e(ds({address:t,data:s}))),[e]);return(0,L.jsx)(Xt,{program:window.senBooster.program,name:"voucherPrinter",filter:hs,init:t,upset:s})},ps=e=>(0,L.jsxs)(a.Fragment,{children:[(0,L.jsx)(Kt,{}),(0,L.jsx)(ss,{}),(0,L.jsx)(xs,{}),(0,L.jsx)(ls,{}),e.children]}),gs=e=>{let{children:t}=e;const{wallet:{address:s}}=(0,n.useWallet)(),[r,o]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=(0,$.getAnchorProvider)(n.rpc,s,window.sentre.wallet),t=new(fe())(e,S.sol.senExchangeProgram);window.senBooster=t,o(!0)}),[s]),r?(0,L.jsx)(a.Fragment,{children:t}):null},js=s.p+"static/media/BG_DARK.5abc7ba13b3fa80a3764.png",ys=s.p+"static/media/BG_LIGHT.f07274a2b795636485ea.png",ms=()=>{const{setBackground:e}=(0,n.useUI)(),{appRoute:t}=R();return(0,a.useEffect)((()=>{e({light:ys,dark:js})}),[e]),(0,L.jsx)(gs,{children:(0,L.jsx)(ps,{children:(0,L.jsxs)(o.Switch,{children:[(0,L.jsx)(o.Route,{path:`${t}/user`,component:et}),(0,L.jsx)(o.Route,{path:`${t}/retailer`,component:Et}),(0,L.jsx)(o.Route,{path:`${t}/create-booster`,component:Ht}),(0,L.jsx)(o.Route,{path:"*",children:(0,L.jsx)(o.Redirect,{to:`${t}/user`})})]})})})};var Cs=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Bs={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof b.web3.PublicKey||e instanceof he()||Cs.isBuffer(e)}},bs="main",fs=(0,M.createAsyncThunk)("main/increaseCounter",(async(e,t)=>{let{getState:s}=t;const{main:{counter:r}}=s();return{counter:r+1}})),ws=(0,M.createSlice)({name:bs,initialState:{counter:0},reducers:{},extraReducers:e=>{e.addCase(fs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Is="searchBoosters",Es={searchInput:"",filterUserBooster:d.AllBooster,filterRetailerBooster:h.AvailableBooster},Ts=(0,M.createAsyncThunk)("searchBoosters/setFilterUserBooster",(async e=>({filterUserBooster:e}))),vs=(0,M.createAsyncThunk)("searchBoosters/setFilterRetailerBooster",(async e=>{let{filterBooster:t}=e;return{filterRetailerBooster:t}})),Ss=(0,M.createAsyncThunk)("searchBoosters/setSearchInput",(async e=>{let{searchText:t}=e;return{searchInput:t}})),ks=(0,M.createSlice)({name:Is,initialState:Es,reducers:{},extraReducers:e=>{e.addCase(Ts.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(vs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ss.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Qs=(0,M.configureStore)({middleware:e=>e(Bs),devTools:!1,reducer:{main:ws,boosters:qt,searchBoosters:ks,orders:es,ordersFilter:Y,voucherPrinters:us,settings:U,vouchers:os}});var Rs=s(45597);const{manifest:{appId:Ms}}=S,Ns=()=>(0,L.jsx)(n.UIProvider,{appId:Ms,antd:{prefixCls:Ms},style:{paddingBottom:24},children:(0,L.jsx)(n.WalletProvider,{children:(0,L.jsx)(n.AccountProvider,{children:(0,L.jsx)(n.PoolProvider,{children:(0,L.jsx)(n.MintProvider,{children:(0,L.jsx)(r.Provider,{store:Qs,children:(0,L.jsx)(ms,{})})})})})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.ff93448fef94ea73029b.md"},69363:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/logo.da175f6d5d1564b6bc58.png"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.6ce7bc345912340df001.png"},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_images_BG_DARK_png-src_static_images_BG_LIGHT_png-src_static-a99de8.5b828349.chunk.js.map